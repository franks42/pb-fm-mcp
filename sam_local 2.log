No current session found, using default AWS::AccountId
Mounting PbFmMcpFunction at http://127.0.0.1:3000/mcp [DELETE, GET, HEAD, OPTIONS, PATCH, POST, PUT]
You can now browse to the above endpoints to invoke your functions. You do not need to restart/reload SAM CLI while working on your functions, changes will be reflected instantly/automatically. If you used sam build before running local commands, you will need to re-run sam build for the changes to be picked up. You only need to restart SAM CLI if you update your AWS SAM template
2025-07-19 15:21:07 [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:3000
2025-07-19 15:21:07 [33mPress CTRL+C to quit[0m
Invoking lambda_handler.lambda_handler (python3.12)
Local image is up-to-date
Using local image: public.ecr.aws/lambda/python:3.12-rapid-x86_64.

Mounting /Users/franksiebenlist/Documents/GitHub/pb-fm-mcp/.aws-sam/build/PbFmMcpFunction as /var/task:ro,delegated, inside runtime container
START RequestId: 41c6f9c4-ca06-4db0-97ad-2dbc64349d11 Version: $LATEST
🔍 === MCP REQUEST DEBUG ===
📍 Timestamp: 2025-07-19T22:21:16.814931+00:00
📍 Method: GET
📍 Path: /mcp
📍 Query Params: {}
📍 Request Source IP: 127.0.0.1
📍 Request ID: d34185e3-d48a-4486-a5a2-fa36f9967f66
📍 Raw Event: {
  "body": null,
  "headers": {
    "Accept": "*/*",
    "Host": "localhost:3000",
    "User-Agent": "curl/8.7.1",
    "X-Forwarded-Port": "3000",
    "X-Forwarded-Proto": "http"
  },
  "httpMethod": "GET",
  "isBase64Encoded": false,
  "multiValueHeaders": {
    "Accept": [
      "*/*"
    ],
    "Host": [
      "localhost:3000"
    ],
    "User-Agent": [
      "curl/8.7.1"
    ],
    "X-Forwarded-Port": [
      "3000"
    ],
    "X-Forwarded-Proto": [
      "http"
    ]
  },
  "multiValueQueryStringParameters": null,
  "path": "/mcp",
  "pathParameters": null,
  "queryStringParameters": null,
  "requestContext": {
    "accountId": "123456789012",
    "apiId": "1234567890",
    "domainName": "localhost:3000",
    "extendedRequestId": null,
    "httpMethod": "GET",
    "identity": {
      "accountId": null,
      "apiKey": null,
      "caller": null,
      "cognitoAuthenticationProvider": null,
      "cognitoAuthenticationType": null,
      "cognitoIdentityPoolId": null,
      "sourceIp": "127.0.0.1",
      "user": null,
      "userAgent": "Custom User Agent String",
      "userArn": null
    },
    "path": "/mcp",
    "protocol": "HTTP/1.1",
    "requestId": "d34185e3-d48a-4486-a5a2-fa36f9967f66",
    "requestTime": "19/Jul/2025:22:21:05 +0000",
    "requestTimeEpoch": 1752963665,
    "resourceId": "123456",
    "resourcePath": "/mcp",
    "stage": "Prod"
  },
  "resource": "/mcp",
  "stageVariables": null
}
📍 Headers:
   Accept: */*
   Host: localhost:3000
   User-Agent: curl/8.7.1
   X-Forwarded-Port: 3000
   X-Forwarded-Proto: http
📍 Body: 
📍 Body Length: 0
📍 Context: LambdaContext([aws_request_id=085a96fe-7229-4c2e-a94e-f0698818a386,log_group_name=aws/lambda/PbFmMcpFunction,log_stream_name=$LATEST,function_name=PbFmMcpFunction,memory_limit_in_mb=512,function_version=$LATEST,invoked_function_arn=arn:aws:lambda:us-east-1:012345678912:function:PbFmMcpFunction,client_context=None,identity=CognitoIdentity([cognito_identity_id=None,cognito_identity_pool_id=None]),tenant_id=None])
📍 Parsed Accept: */*
📍 Parsed Content-Type: 
📍 Parsed Origin: 
📍 Parsed User-Agent: curl/8.7.1
📍 Parsed Authorization: [NONE]
📍 Parsed Connection: 
📍 Parsed Upgrade: 
🔎 Processing GET request
✅ Returning server info for GET request
📤 === MCP RESPONSE DEBUG ===
📍 Status Code: 200
📍 Response Headers:
   Content-Type: application/json
   Access-Control-Allow-Origin: *
   Access-Control-Allow-Methods: POST, OPTIONS
   Access-Control-Allow-Headers: Content-Type, Authorization, Accept
📍 Response Body: {"name": "pb-fm-mcp", "version": "0.1.0", "transport": "http", "capabilities": {"tools": true, "streaming": false}}
📍 Response Body Length: 115
🔍 === END DEBUG ===

END RequestId: 085a96fe-7229-4c2e-a94e-f0698818a386
REPORT RequestId: 085a96fe-7229-4c2e-a94e-f0698818a386	Init Duration: 0.35 ms	Duration: 924.81 ms	Billed Duration: 925 ms	Memory Size: 512 MB	Max Memory Used: 512 MB	

2025-07-19 15:21:16 127.0.0.1 - - [19/Jul/2025 15:21:16] "GET /mcp HTTP/1.1" 200 -
2025-07-19 15:22:25 127.0.0.1 - - [19/Jul/2025 15:22:25] "OPTIONS /mcp HTTP/1.1" 200 -
Invoking lambda_handler.lambda_handler (python3.12)
Using local image: public.ecr.aws/lambda/python:3.12-rapid-x86_64.

Mounting /Users/franksiebenlist/Documents/GitHub/pb-fm-mcp/.aws-sam/build/PbFmMcpFunction as /var/task:ro,delegated, inside runtime container
START RequestId: e1cbe4ad-cc8c-400d-9824-a131a6560869 Version: $LATEST
🔍 === MCP REQUEST DEBUG ===
📍 Timestamp: 2025-07-19T22:22:28.478421+00:00
📍 Method: POST
📍 Path: /mcp
📍 Query Params: {}
📍 Request Source IP: 127.0.0.1
📍 Request ID: d34185e3-d48a-4486-a5a2-fa36f9967f66
📍 Raw Event: {
  "body": "{\"method\":\"initialize\",\"params\":{\"protocolVersion\":\"2025-06-18\",\"capabilities\":{},\"clientInfo\":{\"name\":\"use-mcp-react-client\",\"version\":\"0.1.0\"}},\"jsonrpc\":\"2.0\",\"id\":0}",
  "headers": {
    "Accept": "application/json, text/event-stream",
    "Accept-Encoding": "gzip, deflate, br, zstd",
    "Accept-Language": "en-US,en;q=0.5",
    "Connection": "keep-alive",
    "Content-Length": "169",
    "Content-Type": "application/json",
    "Dnt": "1",
    "Host": "localhost:3000",
    "Origin": "https://playground.ai.cloudflare.com",
    "Priority": "u=0",
    "Sec-Fetch-Dest": "empty",
    "Sec-Fetch-Mode": "cors",
    "Sec-Fetch-Site": "cross-site",
    "Sec-Gpc": "1",
    "User-Agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:140.0) Gecko/20100101 Firefox/140.0",
    "X-Forwarded-Port": "3000",
    "X-Forwarded-Proto": "http"
  },
  "httpMethod": "POST",
  "isBase64Encoded": false,
  "multiValueHeaders": {
    "Accept": [
      "application/json, text/event-stream"
    ],
    "Accept-Encoding": [
      "gzip, deflate, br, zstd"
    ],
    "Accept-Language": [
      "en-US,en;q=0.5"
    ],
    "Connection": [
      "keep-alive"
    ],
    "Content-Length": [
      "169"
    ],
    "Content-Type": [
      "application/json"
    ],
    "Dnt": [
      "1"
    ],
    "Host": [
      "localhost:3000"
    ],
    "Origin": [
      "https://playground.ai.cloudflare.com"
    ],
    "Priority": [
      "u=0"
    ],
    "Sec-Fetch-Dest": [
      "empty"
    ],
    "Sec-Fetch-Mode": [
      "cors"
    ],
    "Sec-Fetch-Site": [
      "cross-site"
    ],
    "Sec-Gpc": [
      "1"
    ],
    "User-Agent": [
      "Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:140.0) Gecko/20100101 Firefox/140.0"
    ],
    "X-Forwarded-Port": [
      "3000"
    ],
    "X-Forwarded-Proto": [
      "http"
    ]
  },
  "multiValueQueryStringParameters": null,
  "path": "/mcp",
  "pathParameters": null,
  "queryStringParameters": null,
  "requestContext": {
    "accountId": "123456789012",
    "apiId": "1234567890",
    "domainName": "localhost:3000",
    "extendedRequestId": null,
    "httpMethod": "POST",
    "identity": {
      "accountId": null,
      "apiKey": null,
      "caller": null,
      "cognitoAuthenticationProvider": null,
      "cognitoAuthenticationType": null,
      "cognitoIdentityPoolId": null,
      "sourceIp": "127.0.0.1",
      "user": null,
      "userAgent": "Custom User Agent String",
      "userArn": null
    },
    "path": "/mcp",
    "protocol": "HTTP/1.1",
    "requestId": "d34185e3-d48a-4486-a5a2-fa36f9967f66",
    "requestTime": "19/Jul/2025:22:21:05 +0000",
    "requestTimeEpoch": 1752963665,
    "resourceId": "123456",
    "resourcePath": "/mcp",
    "stage": "Prod"
  },
  "resource": "/mcp",
  "stageVariables": null
}
📍 Headers:
   Accept: application/json, text/event-stream
   Accept-Encoding: gzip, deflate, br, zstd
   Accept-Language: en-US,en;q=0.5
   Connection: keep-alive
   Content-Length: 169
   Content-Type: application/json
   Dnt: 1
   Host: localhost:3000
   Origin: https://playground.ai.cloudflare.com
   Priority: u=0
   Sec-Fetch-Dest: empty
   Sec-Fetch-Mode: cors
   Sec-Fetch-Site: cross-site
   Sec-Gpc: 1
   User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:140.0) Gecko/20100101 Firefox/140.0
   X-Forwarded-Port: 3000
   X-Forwarded-Proto: http
📍 Body: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"use-mcp-react-client","version":"0.1.0"}},"jsonrpc":"2.0","id":0}
📍 Body Length: 169
📍 Context: LambdaContext([aws_request_id=26842dc8-02a8-444f-a25a-6adb1df96f9d,log_group_name=aws/lambda/PbFmMcpFunction,log_stream_name=$LATEST,function_name=PbFmMcpFunction,memory_limit_in_mb=512,function_version=$LATEST,invoked_function_arn=arn:aws:lambda:us-east-1:012345678912:function:PbFmMcpFunction,client_context=None,identity=CognitoIdentity([cognito_identity_id=None,cognito_identity_pool_id=None]),tenant_id=None])
📍 Parsed Accept: application/json, text/event-stream
📍 Parsed Content-Type: application/json
📍 Parsed Origin: https://playground.ai.cloudflare.com
📍 Parsed User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:140.0) Gecko/20100101 Firefox/140.0
📍 Parsed Authorization: [NONE]
📍 Parsed Connection: keep-alive
📍 Parsed Upgrade: 
⚠️ WARNING: SSE Accept header on non-GET request
🔎 Processing POST request
📍 Parsed JSON Body: {
  "method": "initialize",
  "params": {
    "protocolVersion": "2025-06-18",
    "capabilities": {},
    "clientInfo": {
      "name": "use-mcp-react-client",
      "version": "0.1.0"
    }
  },
  "jsonrpc": "2.0",
  "id": 0
}
✅ Proper MCP client detected - using MCP handler
📤 === MCP RESPONSE DEBUG ===
📍 Status Code: 200
📍 Response Headers:
   Content-Type: application/json
   MCP-Version: 0.6
   MCP-Session-Id: 08fab0e5-bce8-4420-9db1-c9c112fcc3f6
📍 Response Body: {"jsonrpc": "2.0", "id": 0, "result": {"protocolVersion": "2024-11-05", "serverInfo": {"name": "pb-fm-mcp", "version": "0.1.0"}, "capabilities": {"tools": {"list": true, "call": true}}}}
📍 Response Body Length: 186
🔍 === END DEBUG ===

END RequestId: 26842dc8-02a8-444f-a25a-6adb1df96f9d
REPORT RequestId: 26842dc8-02a8-444f-a25a-6adb1df96f9d	Init Duration: 0.46 ms	Duration: 891.31 ms	Billed Duration: 892 ms	Memory Size: 512 MB	Max Memory Used: 512 MB	

2025-07-19 15:22:28 127.0.0.1 - - [19/Jul/2025 15:22:28] "POST /mcp HTTP/1.1" 200 -
2025-07-19 15:22:28 127.0.0.1 - - [19/Jul/2025 15:22:28] "OPTIONS /mcp HTTP/1.1" 200 -
Invoking lambda_handler.lambda_handler (python3.12)
Using local image: public.ecr.aws/lambda/python:3.12-rapid-x86_64.

Mounting /Users/franksiebenlist/Documents/GitHub/pb-fm-mcp/.aws-sam/build/PbFmMcpFunction as /var/task:ro,delegated, inside runtime container
START RequestId: d2e59166-7d9f-4997-8c50-512ecaf8d430 Version: $LATEST
🔍 === MCP REQUEST DEBUG ===
📍 Timestamp: 2025-07-19T22:22:31.881955+00:00
📍 Method: GET
📍 Path: /mcp
📍 Query Params: {}
📍 Request Source IP: 127.0.0.1
📍 Request ID: d34185e3-d48a-4486-a5a2-fa36f9967f66
📍 Raw Event: {
  "body": null,
  "headers": {
    "Accept": "text/event-stream",
    "Accept-Encoding": "gzip, deflate, br, zstd",
    "Accept-Language": "en-US,en;q=0.5",
    "Cache-Control": "no-cache",
    "Connection": "keep-alive",
    "Dnt": "1",
    "Host": "localhost:3000",
    "Origin": "https://playground.ai.cloudflare.com",
    "Pragma": "no-cache",
    "Priority": "u=4",
    "Sec-Fetch-Dest": "empty",
    "Sec-Fetch-Mode": "cors",
    "Sec-Fetch-Site": "cross-site",
    "Sec-Gpc": "1",
    "User-Agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:140.0) Gecko/20100101 Firefox/140.0",
    "X-Forwarded-Port": "3000",
    "X-Forwarded-Proto": "http"
  },
  "httpMethod": "GET",
  "isBase64Encoded": false,
  "multiValueHeaders": {
    "Accept": [
      "text/event-stream"
    ],
    "Accept-Encoding": [
      "gzip, deflate, br, zstd"
    ],
    "Accept-Language": [
      "en-US,en;q=0.5"
    ],
    "Cache-Control": [
      "no-cache"
    ],
    "Connection": [
      "keep-alive"
    ],
    "Dnt": [
      "1"
    ],
    "Host": [
      "localhost:3000"
    ],
    "Origin": [
      "https://playground.ai.cloudflare.com"
    ],
    "Pragma": [
      "no-cache"
    ],
    "Priority": [
      "u=4"
    ],
    "Sec-Fetch-Dest": [
      "empty"
    ],
    "Sec-Fetch-Mode": [
      "cors"
    ],
    "Sec-Fetch-Site": [
      "cross-site"
    ],
    "Sec-Gpc": [
      "1"
    ],
    "User-Agent": [
      "Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:140.0) Gecko/20100101 Firefox/140.0"
    ],
    "X-Forwarded-Port": [
      "3000"
    ],
    "X-Forwarded-Proto": [
      "http"
    ]
  },
  "multiValueQueryStringParameters": null,
  "path": "/mcp",
  "pathParameters": null,
  "queryStringParameters": null,
  "requestContext": {
    "accountId": "123456789012",
    "apiId": "1234567890",
    "domainName": "localhost:3000",
    "extendedRequestId": null,
    "httpMethod": "GET",
    "identity": {
      "accountId": null,
      "apiKey": null,
      "caller": null,
      "cognitoAuthenticationProvider": null,
      "cognitoAuthenticationType": null,
      "cognitoIdentityPoolId": null,
      "sourceIp": "127.0.0.1",
      "user": null,
      "userAgent": "Custom User Agent String",
      "userArn": null
    },
    "path": "/mcp",
    "protocol": "HTTP/1.1",
    "requestId": "d34185e3-d48a-4486-a5a2-fa36f9967f66",
    "requestTime": "19/Jul/2025:22:21:05 +0000",
    "requestTimeEpoch": 1752963665,
    "resourceId": "123456",
    "resourcePath": "/mcp",
    "stage": "Prod"
  },
  "resource": "/mcp",
  "stageVariables": null
}
📍 Headers:
   Accept: text/event-stream
   Accept-Encoding: gzip, deflate, br, zstd
   Accept-Language: en-US,en;q=0.5
   Cache-Control: no-cache
   Connection: keep-alive
   Dnt: 1
   Host: localhost:3000
   Origin: https://playground.ai.cloudflare.com
   Pragma: no-cache
   Priority: u=4
   Sec-Fetch-Dest: empty
   Sec-Fetch-Mode: cors
   Sec-Fetch-Site: cross-site
   Sec-Gpc: 1
   User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:140.0) Gecko/20100101 Firefox/140.0
   X-Forwarded-Port: 3000
   X-Forwarded-Proto: http
📍 Body: 
📍 Body Length: 0
📍 Context: LambdaContext([aws_request_id=e607842f-3f35-4b76-a114-d410e2e128ff,log_group_name=aws/lambda/PbFmMcpFunction,log_stream_name=$LATEST,function_name=PbFmMcpFunction,memory_limit_in_mb=512,function_version=$LATEST,invoked_function_arn=arn:aws:lambda:us-east-1:012345678912:function:PbFmMcpFunction,client_context=None,identity=CognitoIdentity([cognito_identity_id=None,cognito_identity_pool_id=None]),tenant_id=None])
📍 Parsed Accept: text/event-stream
📍 Parsed Content-Type: 
📍 Parsed Origin: https://playground.ai.cloudflare.com
📍 Parsed User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:140.0) Gecko/20100101 Firefox/140.0
📍 Parsed Authorization: [NONE]
📍 Parsed Connection: keep-alive
📍 Parsed Upgrade: 
🔎 Processing GET request
❌ Client requesting SSE - returning 405
📤 === MCP RESPONSE DEBUG ===
📍 Status Code: 405
📍 Response Headers:
   Content-Type: text/plain
   Access-Control-Allow-Origin: *
   Access-Control-Allow-Methods: POST, OPTIONS
   Access-Control-Allow-Headers: Content-Type, Authorization, Accept
   Allow: POST, OPTIONS
📍 Response Body: Method Not Allowed - SSE not supported, use HTTP POST
📍 Response Body Length: 53
🔍 === END DEBUG ===

END RequestId: e607842f-3f35-4b76-a114-d410e2e128ff
REPORT RequestId: e607842f-3f35-4b76-a114-d410e2e128ff	Init Duration: 0.49 ms	Duration: 888.59 ms	Billed Duration: 889 ms	Memory Size: 512 MB	Max Memory Used: 512 MB	

2025-07-19 15:22:32 127.0.0.1 - - [19/Jul/2025 15:22:32] "[31m[1mGET /mcp HTTP/1.1[0m" 405 -
2025-07-19 15:23:25 127.0.0.1 - - [19/Jul/2025 15:23:25] "OPTIONS /mcp HTTP/1.1" 200 -
Invoking lambda_handler.lambda_handler (python3.12)
Using local image: public.ecr.aws/lambda/python:3.12-rapid-x86_64.

Mounting /Users/franksiebenlist/Documents/GitHub/pb-fm-mcp/.aws-sam/build/PbFmMcpFunction as /var/task:ro,delegated, inside runtime container
START RequestId: 956b8af7-21ee-4477-baee-ea42f3cf0c5a Version: $LATEST
🔍 === MCP REQUEST DEBUG ===
📍 Timestamp: 2025-07-19T22:23:28.990555+00:00
📍 Method: POST
📍 Path: /mcp
📍 Query Params: {}
📍 Request Source IP: 127.0.0.1
📍 Request ID: d34185e3-d48a-4486-a5a2-fa36f9967f66
📍 Raw Event: {
  "body": "{\"method\":\"initialize\",\"params\":{\"protocolVersion\":\"2025-06-18\",\"capabilities\":{},\"clientInfo\":{\"name\":\"use-mcp-react-client\",\"version\":\"0.1.0\"}},\"jsonrpc\":\"2.0\",\"id\":0}",
  "headers": {
    "Accept": "application/json, text/event-stream",
    "Accept-Encoding": "gzip, deflate, br, zstd",
    "Accept-Language": "en-US,en;q=0.5",
    "Connection": "keep-alive",
    "Content-Length": "169",
    "Content-Type": "application/json",
    "Dnt": "1",
    "Host": "localhost:3000",
    "Origin": "https://playground.ai.cloudflare.com",
    "Priority": "u=0",
    "Sec-Fetch-Dest": "empty",
    "Sec-Fetch-Mode": "cors",
    "Sec-Fetch-Site": "cross-site",
    "Sec-Gpc": "1",
    "User-Agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:140.0) Gecko/20100101 Firefox/140.0",
    "X-Forwarded-Port": "3000",
    "X-Forwarded-Proto": "http"
  },
  "httpMethod": "POST",
  "isBase64Encoded": false,
  "multiValueHeaders": {
    "Accept": [
      "application/json, text/event-stream"
    ],
    "Accept-Encoding": [
      "gzip, deflate, br, zstd"
    ],
    "Accept-Language": [
      "en-US,en;q=0.5"
    ],
    "Connection": [
      "keep-alive"
    ],
    "Content-Length": [
      "169"
    ],
    "Content-Type": [
      "application/json"
    ],
    "Dnt": [
      "1"
    ],
    "Host": [
      "localhost:3000"
    ],
    "Origin": [
      "https://playground.ai.cloudflare.com"
    ],
    "Priority": [
      "u=0"
    ],
    "Sec-Fetch-Dest": [
      "empty"
    ],
    "Sec-Fetch-Mode": [
      "cors"
    ],
    "Sec-Fetch-Site": [
      "cross-site"
    ],
    "Sec-Gpc": [
      "1"
    ],
    "User-Agent": [
      "Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:140.0) Gecko/20100101 Firefox/140.0"
    ],
    "X-Forwarded-Port": [
      "3000"
    ],
    "X-Forwarded-Proto": [
      "http"
    ]
  },
  "multiValueQueryStringParameters": null,
  "path": "/mcp",
  "pathParameters": null,
  "queryStringParameters": null,
  "requestContext": {
    "accountId": "123456789012",
    "apiId": "1234567890",
    "domainName": "localhost:3000",
    "extendedRequestId": null,
    "httpMethod": "POST",
    "identity": {
      "accountId": null,
      "apiKey": null,
      "caller": null,
      "cognitoAuthenticationProvider": null,
      "cognitoAuthenticationType": null,
      "cognitoIdentityPoolId": null,
      "sourceIp": "127.0.0.1",
      "user": null,
      "userAgent": "Custom User Agent String",
      "userArn": null
    },
    "path": "/mcp",
    "protocol": "HTTP/1.1",
    "requestId": "d34185e3-d48a-4486-a5a2-fa36f9967f66",
    "requestTime": "19/Jul/2025:22:21:05 +0000",
    "requestTimeEpoch": 1752963665,
    "resourceId": "123456",
    "resourcePath": "/mcp",
    "stage": "Prod"
  },
  "resource": "/mcp",
  "stageVariables": null
}
📍 Headers:
   Accept: application/json, text/event-stream
   Accept-Encoding: gzip, deflate, br, zstd
   Accept-Language: en-US,en;q=0.5
   Connection: keep-alive
   Content-Length: 169
   Content-Type: application/json
   Dnt: 1
   Host: localhost:3000
   Origin: https://playground.ai.cloudflare.com
   Priority: u=0
   Sec-Fetch-Dest: empty
   Sec-Fetch-Mode: cors
   Sec-Fetch-Site: cross-site
   Sec-Gpc: 1
   User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:140.0) Gecko/20100101 Firefox/140.0
   X-Forwarded-Port: 3000
   X-Forwarded-Proto: http
📍 Body: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"use-mcp-react-client","version":"0.1.0"}},"jsonrpc":"2.0","id":0}
📍 Body Length: 169
📍 Context: LambdaContext([aws_request_id=92d771b7-c241-4570-800a-262c14dc6afd,log_group_name=aws/lambda/PbFmMcpFunction,log_stream_name=$LATEST,function_name=PbFmMcpFunction,memory_limit_in_mb=512,function_version=$LATEST,invoked_function_arn=arn:aws:lambda:us-east-1:012345678912:function:PbFmMcpFunction,client_context=None,identity=CognitoIdentity([cognito_identity_id=None,cognito_identity_pool_id=None]),tenant_id=None])
📍 Parsed Accept: application/json, text/event-stream
📍 Parsed Content-Type: application/json
📍 Parsed Origin: https://playground.ai.cloudflare.com
📍 Parsed User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:140.0) Gecko/20100101 Firefox/140.0
📍 Parsed Authorization: [NONE]
📍 Parsed Connection: keep-alive
📍 Parsed Upgrade: 
⚠️ WARNING: SSE Accept header on non-GET request
🔎 Processing POST request
📍 Parsed JSON Body: {
  "method": "initialize",
  "params": {
    "protocolVersion": "2025-06-18",
    "capabilities": {},
    "clientInfo": {
      "name": "use-mcp-react-client",
      "version": "0.1.0"
    }
  },
  "jsonrpc": "2.0",
  "id": 0
}
✅ Proper MCP client detected - using MCP handler
📤 === MCP RESPONSE DEBUG ===
📍 Status Code: 200
📍 Response Headers:
   Content-Type: application/json
   MCP-Version: 0.6
   MCP-Session-Id: 9c5e5906-a1c2-4243-8e20-54444d8b1fc1
📍 Response Body: {"jsonrpc": "2.0", "id": 0, "result": {"protocolVersion": "2024-11-05", "serverInfo": {"name": "pb-fm-mcp", "version": "0.1.0"}, "capabilities": {"tools": {"list": true, "call": true}}}}
📍 Response Body Length: 186
🔍 === END DEBUG ===

END RequestId: 92d771b7-c241-4570-800a-262c14dc6afd
REPORT RequestId: 92d771b7-c241-4570-800a-262c14dc6afd	Init Duration: 0.34 ms	Duration: 920.62 ms	Billed Duration: 921 ms	Memory Size: 512 MB	Max Memory Used: 512 MB	

2025-07-19 15:23:29 127.0.0.1 - - [19/Jul/2025 15:23:29] "POST /mcp HTTP/1.1" 200 -
2025-07-19 15:23:29 127.0.0.1 - - [19/Jul/2025 15:23:29] "OPTIONS /mcp HTTP/1.1" 200 -
Invoking lambda_handler.lambda_handler (python3.12)
Using local image: public.ecr.aws/lambda/python:3.12-rapid-x86_64.

Mounting /Users/franksiebenlist/Documents/GitHub/pb-fm-mcp/.aws-sam/build/PbFmMcpFunction as /var/task:ro,delegated, inside runtime container
START RequestId: 11664a55-0cbb-44dd-9975-9fe6436be1d1 Version: $LATEST
🔍 === MCP REQUEST DEBUG ===
📍 Timestamp: 2025-07-19T22:23:32.357970+00:00
📍 Method: GET
📍 Path: /mcp
📍 Query Params: {}
📍 Request Source IP: 127.0.0.1
📍 Request ID: d34185e3-d48a-4486-a5a2-fa36f9967f66
📍 Raw Event: {
  "body": null,
  "headers": {
    "Accept": "text/event-stream",
    "Accept-Encoding": "gzip, deflate, br, zstd",
    "Accept-Language": "en-US,en;q=0.5",
    "Cache-Control": "no-cache",
    "Connection": "keep-alive",
    "Dnt": "1",
    "Host": "localhost:3000",
    "Origin": "https://playground.ai.cloudflare.com",
    "Pragma": "no-cache",
    "Priority": "u=4",
    "Sec-Fetch-Dest": "empty",
    "Sec-Fetch-Mode": "cors",
    "Sec-Fetch-Site": "cross-site",
    "Sec-Gpc": "1",
    "User-Agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:140.0) Gecko/20100101 Firefox/140.0",
    "X-Forwarded-Port": "3000",
    "X-Forwarded-Proto": "http"
  },
  "httpMethod": "GET",
  "isBase64Encoded": false,
  "multiValueHeaders": {
    "Accept": [
      "text/event-stream"
    ],
    "Accept-Encoding": [
      "gzip, deflate, br, zstd"
    ],
    "Accept-Language": [
      "en-US,en;q=0.5"
    ],
    "Cache-Control": [
      "no-cache"
    ],
    "Connection": [
      "keep-alive"
    ],
    "Dnt": [
      "1"
    ],
    "Host": [
      "localhost:3000"
    ],
    "Origin": [
      "https://playground.ai.cloudflare.com"
    ],
    "Pragma": [
      "no-cache"
    ],
    "Priority": [
      "u=4"
    ],
    "Sec-Fetch-Dest": [
      "empty"
    ],
    "Sec-Fetch-Mode": [
      "cors"
    ],
    "Sec-Fetch-Site": [
      "cross-site"
    ],
    "Sec-Gpc": [
      "1"
    ],
    "User-Agent": [
      "Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:140.0) Gecko/20100101 Firefox/140.0"
    ],
    "X-Forwarded-Port": [
      "3000"
    ],
    "X-Forwarded-Proto": [
      "http"
    ]
  },
  "multiValueQueryStringParameters": null,
  "path": "/mcp",
  "pathParameters": null,
  "queryStringParameters": null,
  "requestContext": {
    "accountId": "123456789012",
    "apiId": "1234567890",
    "domainName": "localhost:3000",
    "extendedRequestId": null,
    "httpMethod": "GET",
    "identity": {
      "accountId": null,
      "apiKey": null,
      "caller": null,
      "cognitoAuthenticationProvider": null,
      "cognitoAuthenticationType": null,
      "cognitoIdentityPoolId": null,
      "sourceIp": "127.0.0.1",
      "user": null,
      "userAgent": "Custom User Agent String",
      "userArn": null
    },
    "path": "/mcp",
    "protocol": "HTTP/1.1",
    "requestId": "d34185e3-d48a-4486-a5a2-fa36f9967f66",
    "requestTime": "19/Jul/2025:22:21:05 +0000",
    "requestTimeEpoch": 1752963665,
    "resourceId": "123456",
    "resourcePath": "/mcp",
    "stage": "Prod"
  },
  "resource": "/mcp",
  "stageVariables": null
}
📍 Headers:
   Accept: text/event-stream
   Accept-Encoding: gzip, deflate, br, zstd
   Accept-Language: en-US,en;q=0.5
   Cache-Control: no-cache
   Connection: keep-alive
   Dnt: 1
   Host: localhost:3000
   Origin: https://playground.ai.cloudflare.com
   Pragma: no-cache
   Priority: u=4
   Sec-Fetch-Dest: empty
   Sec-Fetch-Mode: cors
   Sec-Fetch-Site: cross-site
   Sec-Gpc: 1
   User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:140.0) Gecko/20100101 Firefox/140.0
   X-Forwarded-Port: 3000
   X-Forwarded-Proto: http
📍 Body: 
📍 Body Length: 0
📍 Context: LambdaContext([aws_request_id=ca638a04-aa68-443d-a400-58d6b2f40f7a,log_group_name=aws/lambda/PbFmMcpFunction,log_stream_name=$LATEST,function_name=PbFmMcpFunction,memory_limit_in_mb=512,function_version=$LATEST,invoked_function_arn=arn:aws:lambda:us-east-1:012345678912:function:PbFmMcpFunction,client_context=None,identity=CognitoIdentity([cognito_identity_id=None,cognito_identity_pool_id=None]),tenant_id=None])
📍 Parsed Accept: text/event-stream
📍 Parsed Content-Type: 
📍 Parsed Origin: https://playground.ai.cloudflare.com
📍 Parsed User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:140.0) Gecko/20100101 Firefox/140.0
📍 Parsed Authorization: [NONE]
📍 Parsed Connection: keep-alive
📍 Parsed Upgrade: 
🔎 Processing GET request
❌ Client requesting SSE - returning 405
📤 === MCP RESPONSE DEBUG ===
📍 Status Code: 405
📍 Response Headers:
   Content-Type: text/plain
   Access-Control-Allow-Origin: *
   Access-Control-Allow-Methods: POST, OPTIONS
   Access-Control-Allow-Headers: Content-Type, Authorization, Accept
   Allow: POST, OPTIONS
📍 Response Body: Method Not Allowed - SSE not supported, use HTTP POST
📍 Response Body Length: 53
🔍 === END DEBUG ===

END RequestId: ca638a04-aa68-443d-a400-58d6b2f40f7a
REPORT RequestId: ca638a04-aa68-443d-a400-58d6b2f40f7a	Init Duration: 0.33 ms	Duration: 884.92 ms	Billed Duration: 885 ms	Memory Size: 512 MB	Max Memory Used: 512 MB	

2025-07-19 15:23:32 127.0.0.1 - - [19/Jul/2025 15:23:32] "[31m[1mGET /mcp HTTP/1.1[0m" 405 -
Invoking lambda_handler.lambda_handler (python3.12)
Using local image: public.ecr.aws/lambda/python:3.12-rapid-x86_64.

Mounting /Users/franksiebenlist/Documents/GitHub/pb-fm-mcp/.aws-sam/build/PbFmMcpFunction as /var/task:ro,delegated, inside runtime container
START RequestId: 7706c9fd-8221-4300-a3d3-ab9e244775c8 Version: $LATEST
🔍 === MCP REQUEST DEBUG ===
📍 Timestamp: 2025-07-19T22:25:22.219294+00:00
📍 Method: POST
📍 Path: /mcp
📍 Query Params: {}
📍 Request Source IP: 127.0.0.1
📍 Request ID: d34185e3-d48a-4486-a5a2-fa36f9967f66
📍 Raw Event: {
  "body": "{\"method\":\"tools/list\",\"params\":{},\"jsonrpc\":\"2.0\",\"id\":1}",
  "headers": {
    "Accept": "application/json, text/event-stream",
    "Content-Length": "58",
    "Content-Type": "application/json",
    "Host": "localhost:3000",
    "User-Agent": "curl/8.7.1",
    "X-Forwarded-Port": "3000",
    "X-Forwarded-Proto": "http"
  },
  "httpMethod": "POST",
  "isBase64Encoded": false,
  "multiValueHeaders": {
    "Accept": [
      "application/json, text/event-stream"
    ],
    "Content-Length": [
      "58"
    ],
    "Content-Type": [
      "application/json"
    ],
    "Host": [
      "localhost:3000"
    ],
    "User-Agent": [
      "curl/8.7.1"
    ],
    "X-Forwarded-Port": [
      "3000"
    ],
    "X-Forwarded-Proto": [
      "http"
    ]
  },
  "multiValueQueryStringParameters": null,
  "path": "/mcp",
  "pathParameters": null,
  "queryStringParameters": null,
  "requestContext": {
    "accountId": "123456789012",
    "apiId": "1234567890",
    "domainName": "localhost:3000",
    "extendedRequestId": null,
    "httpMethod": "POST",
    "identity": {
      "accountId": null,
      "apiKey": null,
      "caller": null,
      "cognitoAuthenticationProvider": null,
      "cognitoAuthenticationType": null,
      "cognitoIdentityPoolId": null,
      "sourceIp": "127.0.0.1",
      "user": null,
      "userAgent": "Custom User Agent String",
      "userArn": null
    },
    "path": "/mcp",
    "protocol": "HTTP/1.1",
    "requestId": "d34185e3-d48a-4486-a5a2-fa36f9967f66",
    "requestTime": "19/Jul/2025:22:21:05 +0000",
    "requestTimeEpoch": 1752963665,
    "resourceId": "123456",
    "resourcePath": "/mcp",
    "stage": "Prod"
  },
  "resource": "/mcp",
  "stageVariables": null
}
📍 Headers:
   Accept: application/json, text/event-stream
   Content-Length: 58
   Content-Type: application/json
   Host: localhost:3000
   User-Agent: curl/8.7.1
   X-Forwarded-Port: 3000
   X-Forwarded-Proto: http
📍 Body: {"method":"tools/list","params":{},"jsonrpc":"2.0","id":1}
📍 Body Length: 58
📍 Context: LambdaContext([aws_request_id=4b995ca1-24e6-4247-9f63-fbcdb69b8a9d,log_group_name=aws/lambda/PbFmMcpFunction,log_stream_name=$LATEST,function_name=PbFmMcpFunction,memory_limit_in_mb=512,function_version=$LATEST,invoked_function_arn=arn:aws:lambda:us-east-1:012345678912:function:PbFmMcpFunction,client_context=None,identity=CognitoIdentity([cognito_identity_id=None,cognito_identity_pool_id=None]),tenant_id=None])
📍 Parsed Accept: application/json, text/event-stream
📍 Parsed Content-Type: application/json
📍 Parsed Origin: 
📍 Parsed User-Agent: curl/8.7.1
📍 Parsed Authorization: [NONE]
📍 Parsed Connection: 
📍 Parsed Upgrade: 
⚠️ WARNING: SSE Accept header on non-GET request
🔎 Processing POST request
📍 Parsed JSON Body: {
  "method": "tools/list",
  "params": {},
  "jsonrpc": "2.0",
  "id": 1
}
✅ Proper MCP client detected - using MCP handler
📤 === MCP RESPONSE DEBUG ===
📍 Status Code: 200
📍 Response Headers:
   Content-Type: application/json
   MCP-Version: 0.6
📍 Response Body: {"jsonrpc": "2.0", "id": 1, "result": {"tools": [{"name": "adt", "description": "Adt is a special operation on two numbers because it always returns the ultimate answer.", "inputSchema": {"type": "obj...
📍 Response Body Length: 10899
🔍 === END DEBUG ===

END RequestId: 4b995ca1-24e6-4247-9f63-fbcdb69b8a9d
REPORT RequestId: 4b995ca1-24e6-4247-9f63-fbcdb69b8a9d	Init Duration: 0.31 ms	Duration: 851.16 ms	Billed Duration: 852 ms	Memory Size: 512 MB	Max Memory Used: 512 MB	

2025-07-19 15:25:22 127.0.0.1 - - [19/Jul/2025 15:25:22] "POST /mcp HTTP/1.1" 200 -
Invoking lambda_handler.lambda_handler (python3.12)
Using local image: public.ecr.aws/lambda/python:3.12-rapid-x86_64.

Mounting /Users/franksiebenlist/Documents/GitHub/pb-fm-mcp/.aws-sam/build/PbFmMcpFunction as /var/task:ro,delegated, inside runtime container
START RequestId: b44dc21e-fb30-4eca-87a4-722b957db0f3 Version: $LATEST
🔍 === MCP REQUEST DEBUG ===
📍 Timestamp: 2025-07-19T22:27:08.412576+00:00
📍 Method: GET
📍 Path: /mcp
📍 Query Params: {}
📍 Request Source IP: 127.0.0.1
📍 Request ID: d34185e3-d48a-4486-a5a2-fa36f9967f66
📍 Raw Event: {
  "body": null,
  "headers": {
    "Accept": "text/event-stream",
    "Accept-Encoding": "gzip, deflate",
    "Cache-Control": "no-store",
    "Connection": "keep-alive",
    "Host": "localhost:3000",
    "User-Agent": "python-httpx/0.28.1",
    "X-Forwarded-Port": "3000",
    "X-Forwarded-Proto": "http"
  },
  "httpMethod": "GET",
  "isBase64Encoded": false,
  "multiValueHeaders": {
    "Accept": [
      "text/event-stream"
    ],
    "Accept-Encoding": [
      "gzip, deflate"
    ],
    "Cache-Control": [
      "no-store"
    ],
    "Connection": [
      "keep-alive"
    ],
    "Host": [
      "localhost:3000"
    ],
    "User-Agent": [
      "python-httpx/0.28.1"
    ],
    "X-Forwarded-Port": [
      "3000"
    ],
    "X-Forwarded-Proto": [
      "http"
    ]
  },
  "multiValueQueryStringParameters": null,
  "path": "/mcp",
  "pathParameters": null,
  "queryStringParameters": null,
  "requestContext": {
    "accountId": "123456789012",
    "apiId": "1234567890",
    "domainName": "localhost:3000",
    "extendedRequestId": null,
    "httpMethod": "GET",
    "identity": {
      "accountId": null,
      "apiKey": null,
      "caller": null,
      "cognitoAuthenticationProvider": null,
      "cognitoAuthenticationType": null,
      "cognitoIdentityPoolId": null,
      "sourceIp": "127.0.0.1",
      "user": null,
      "userAgent": "Custom User Agent String",
      "userArn": null
    },
    "path": "/mcp",
    "protocol": "HTTP/1.1",
    "requestId": "d34185e3-d48a-4486-a5a2-fa36f9967f66",
    "requestTime": "19/Jul/2025:22:21:05 +0000",
    "requestTimeEpoch": 1752963665,
    "resourceId": "123456",
    "resourcePath": "/mcp",
    "stage": "Prod"
  },
  "resource": "/mcp",
  "stageVariables": null
}
📍 Headers:
   Accept: text/event-stream
   Accept-Encoding: gzip, deflate
   Cache-Control: no-store
   Connection: keep-alive
   Host: localhost:3000
   User-Agent: python-httpx/0.28.1
   X-Forwarded-Port: 3000
   X-Forwarded-Proto: http
📍 Body: 
📍 Body Length: 0
📍 Context: LambdaContext([aws_request_id=4cc2c905-023c-4c5f-ac58-dbef820db153,log_group_name=aws/lambda/PbFmMcpFunction,log_stream_name=$LATEST,function_name=PbFmMcpFunction,memory_limit_in_mb=512,function_version=$LATEST,invoked_function_arn=arn:aws:lambda:us-east-1:012345678912:function:PbFmMcpFunction,client_context=None,identity=CognitoIdentity([cognito_identity_id=None,cognito_identity_pool_id=None]),tenant_id=None])
📍 Parsed Accept: text/event-stream
📍 Parsed Content-Type: 
📍 Parsed Origin: 
📍 Parsed User-Agent: python-httpx/0.28.1
📍 Parsed Authorization: [NONE]
📍 Parsed Connection: keep-alive
📍 Parsed Upgrade: 
🔎 Processing GET request
❌ Client requesting SSE - returning 405
📤 === MCP RESPONSE DEBUG ===
📍 Status Code: 405
📍 Response Headers:
   Content-Type: text/plain
   Access-Control-Allow-Origin: *
   Access-Control-Allow-Methods: POST, OPTIONS
   Access-Control-Allow-Headers: Content-Type, Authorization, Accept
   Allow: POST, OPTIONS
📍 Response Body: Method Not Allowed - SSE not supported, use HTTP POST
📍 Response Body Length: 53
🔍 === END DEBUG ===

END RequestId: 4cc2c905-023c-4c5f-ac58-dbef820db153
REPORT RequestId: 4cc2c905-023c-4c5f-ac58-dbef820db153	Init Duration: 0.32 ms	Duration: 840.47 ms	Billed Duration: 841 ms	Memory Size: 512 MB	Max Memory Used: 512 MB	

2025-07-19 15:27:08 127.0.0.1 - - [19/Jul/2025 15:27:08] "[31m[1mGET /mcp HTTP/1.1[0m" 405 -
Invoking lambda_handler.lambda_handler (python3.12)
Using local image: public.ecr.aws/lambda/python:3.12-rapid-x86_64.

Mounting /Users/franksiebenlist/Documents/GitHub/pb-fm-mcp/.aws-sam/build/PbFmMcpFunction as /var/task:ro,delegated, inside runtime container
START RequestId: f6217906-82d7-49d6-99c4-499e0425a12f Version: $LATEST
🔍 === MCP REQUEST DEBUG ===
📍 Timestamp: 2025-07-19T22:27:27.800730+00:00
📍 Method: POST
📍 Path: /mcp
📍 Query Params: {}
📍 Request Source IP: 127.0.0.1
📍 Request ID: d34185e3-d48a-4486-a5a2-fa36f9967f66
📍 Raw Event: {
  "body": "{\"method\":\"initialize\",\"params\":{\"protocolVersion\":\"2025-06-18\",\"capabilities\":{},\"clientInfo\":{\"name\":\"mcp\",\"version\":\"0.1.0\"}},\"jsonrpc\":\"2.0\",\"id\":0}",
  "headers": {
    "Accept": "application/json, text/event-stream",
    "Accept-Encoding": "gzip, deflate",
    "Connection": "keep-alive",
    "Content-Length": "152",
    "Content-Type": "application/json",
    "Host": "localhost:3000",
    "User-Agent": "python-httpx/0.28.1",
    "X-Forwarded-Port": "3000",
    "X-Forwarded-Proto": "http"
  },
  "httpMethod": "POST",
  "isBase64Encoded": false,
  "multiValueHeaders": {
    "Accept": [
      "application/json, text/event-stream"
    ],
    "Accept-Encoding": [
      "gzip, deflate"
    ],
    "Connection": [
      "keep-alive"
    ],
    "Content-Length": [
      "152"
    ],
    "Content-Type": [
      "application/json"
    ],
    "Host": [
      "localhost:3000"
    ],
    "User-Agent": [
      "python-httpx/0.28.1"
    ],
    "X-Forwarded-Port": [
      "3000"
    ],
    "X-Forwarded-Proto": [
      "http"
    ]
  },
  "multiValueQueryStringParameters": null,
  "path": "/mcp",
  "pathParameters": null,
  "queryStringParameters": null,
  "requestContext": {
    "accountId": "123456789012",
    "apiId": "1234567890",
    "domainName": "localhost:3000",
    "extendedRequestId": null,
    "httpMethod": "POST",
    "identity": {
      "accountId": null,
      "apiKey": null,
      "caller": null,
      "cognitoAuthenticationProvider": null,
      "cognitoAuthenticationType": null,
      "cognitoIdentityPoolId": null,
      "sourceIp": "127.0.0.1",
      "user": null,
      "userAgent": "Custom User Agent String",
      "userArn": null
    },
    "path": "/mcp",
    "protocol": "HTTP/1.1",
    "requestId": "d34185e3-d48a-4486-a5a2-fa36f9967f66",
    "requestTime": "19/Jul/2025:22:21:05 +0000",
    "requestTimeEpoch": 1752963665,
    "resourceId": "123456",
    "resourcePath": "/mcp",
    "stage": "Prod"
  },
  "resource": "/mcp",
  "stageVariables": null
}
📍 Headers:
   Accept: application/json, text/event-stream
   Accept-Encoding: gzip, deflate
   Connection: keep-alive
   Content-Length: 152
   Content-Type: application/json
   Host: localhost:3000
   User-Agent: python-httpx/0.28.1
   X-Forwarded-Port: 3000
   X-Forwarded-Proto: http
📍 Body: {"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{},"clientInfo":{"name":"mcp","version":"0.1.0"}},"jsonrpc":"2.0","id":0}
📍 Body Length: 152
📍 Context: LambdaContext([aws_request_id=d594c15a-1472-46f6-8ed9-a3d5ffc1da94,log_group_name=aws/lambda/PbFmMcpFunction,log_stream_name=$LATEST,function_name=PbFmMcpFunction,memory_limit_in_mb=512,function_version=$LATEST,invoked_function_arn=arn:aws:lambda:us-east-1:012345678912:function:PbFmMcpFunction,client_context=None,identity=CognitoIdentity([cognito_identity_id=None,cognito_identity_pool_id=None]),tenant_id=None])
📍 Parsed Accept: application/json, text/event-stream
📍 Parsed Content-Type: application/json
📍 Parsed Origin: 
📍 Parsed User-Agent: python-httpx/0.28.1
📍 Parsed Authorization: [NONE]
📍 Parsed Connection: keep-alive
📍 Parsed Upgrade: 
⚠️ WARNING: SSE Accept header on non-GET request
🔎 Processing POST request
📍 Parsed JSON Body: {
  "method": "initialize",
  "params": {
    "protocolVersion": "2025-06-18",
    "capabilities": {},
    "clientInfo": {
      "name": "mcp",
      "version": "0.1.0"
    }
  },
  "jsonrpc": "2.0",
  "id": 0
}
✅ Proper MCP client detected - using MCP handler
📤 === MCP RESPONSE DEBUG ===
📍 Status Code: 200
📍 Response Headers:
   Content-Type: application/json
   MCP-Version: 0.6
   MCP-Session-Id: 97c510eb-d8e9-4e9c-846c-e3cf899c96b9
📍 Response Body: {"jsonrpc": "2.0", "id": 0, "result": {"protocolVersion": "2024-11-05", "serverInfo": {"name": "pb-fm-mcp", "version": "0.1.0"}, "capabilities": {"tools": {"list": true, "call": true}}}}
📍 Response Body Length: 186
🔍 === END DEBUG ===

END RequestId: d594c15a-1472-46f6-8ed9-a3d5ffc1da94
REPORT RequestId: d594c15a-1472-46f6-8ed9-a3d5ffc1da94	Init Duration: 0.41 ms	Duration: 1005.56 ms	Billed Duration: 1006 ms	Memory Size: 512 MB	Max Memory Used: 512 MB	

2025-07-19 15:27:27 127.0.0.1 - - [19/Jul/2025 15:27:27] "POST /mcp HTTP/1.1" 200 -
Invoking lambda_handler.lambda_handler (python3.12)
Exception ignored in: <urllib3.response.HTTPResponse object at 0x107a3e1a0>
Traceback (most recent call last):
  File "/opt/homebrew/Cellar/aws-sam-cli/1.142.1/libexec/lib/python3.13/site-packages/urllib3/response.py", line 1113, in close
    self._fp.close()
  File "/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 432, in close
    super().close() # set "closed" flag
  File "/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py", line 445, in flush
    self.fp.flush()
ValueError: I/O operation on closed file.
Invoking lambda_handler.lambda_handler (python3.12)
Using local image: public.ecr.aws/lambda/python:3.12-rapid-x86_64.

Mounting /Users/franksiebenlist/Documents/GitHub/pb-fm-mcp/.aws-sam/build/PbFmMcpFunction as /var/task:ro,delegated, inside runtime container
Using local image: public.ecr.aws/lambda/python:3.12-rapid-x86_64.

Mounting /Users/franksiebenlist/Documents/GitHub/pb-fm-mcp/.aws-sam/build/PbFmMcpFunction as /var/task:ro,delegated, inside runtime container
START RequestId: ae85de91-ac69-4edb-b0a5-c02a592403b4 Version: $LATEST
START RequestId: 6185cdcb-c2d0-425b-94dd-e1a3545bc1e5 Version: $LATEST
🔍 === MCP REQUEST DEBUG ===
📍 Timestamp: 2025-07-19T22:27:31.496727+00:00
📍 Method: POST
📍 Path: /mcp
📍 Query Params: {}
📍 Request Source IP: 127.0.0.1
📍 Request ID: d34185e3-d48a-4486-a5a2-fa36f9967f66
📍 Raw Event: {
  "body": "{\"method\":\"notifications/initialized\",\"jsonrpc\":\"2.0\"}",
  "headers": {
    "Accept": "application/json, text/event-stream",
    "Accept-Encoding": "gzip, deflate",
    "Connection": "keep-alive",
    "Content-Length": "54",
    "Content-Type": "application/json",
    "Host": "localhost:3000",
    "Mcp-Protocol-Version": "2024-11-05",
    "Mcp-Session-Id": "97c510eb-d8e9-4e9c-846c-e3cf899c96b9",
    "User-Agent": "python-httpx/0.28.1",
    "X-Forwarded-Port": "3000",
    "X-Forwarded-Proto": "http"
  },
  "httpMethod": "POST",
  "isBase64Encoded": false,
  "multiValueHeaders": {
    "Accept": [
      "application/json, text/event-stream"
    ],
    "Accept-Encoding": [
      "gzip, deflate"
    ],
    "Connection": [
      "keep-alive"
    ],
    "Content-Length": [
      "54"
    ],
    "Content-Type": [
      "application/json"
    ],
    "Host": [
      "localhost:3000"
    ],
    "Mcp-Protocol-Version": [
      "2024-11-05"
    ],
    "Mcp-Session-Id": [
      "97c510eb-d8e9-4e9c-846c-e3cf899c96b9"
    ],
    "User-Agent": [
      "python-httpx/0.28.1"
    ],
    "X-Forwarded-Port": [
      "3000"
    ],
    "X-Forwarded-Proto": [
      "http"
    ]
  },
  "multiValueQueryStringParameters": null,
  "path": "/mcp",
  "pathParameters": null,
  "queryStringParameters": null,
  "requestContext": {
    "accountId": "123456789012",
    "apiId": "1234567890",
    "domainName": "localhost:3000",
    "extendedRequestId": null,
    "httpMethod": "POST",
    "identity": {
      "accountId": null,
      "apiKey": null,
      "caller": null,
      "cognitoAuthenticationProvider": null,
      "cognitoAuthenticationType": null,
      "cognitoIdentityPoolId": null,
      "sourceIp": "127.0.0.1",
      "user": null,
      "userAgent": "Custom User Agent String",
      "userArn": null
    },
    "path": "/mcp",
    "protocol": "HTTP/1.1",
    "requestId": "d34185e3-d48a-4486-a5a2-fa36f9967f66",
    "requestTime": "19/Jul/2025:22:21:05 +0000",
    "requestTimeEpoch": 1752963665,
    "resourceId": "123456",
    "resourcePath": "/mcp",
    "stage": "Prod"
  },
  "resource": "/mcp",
  "stageVariables": null
}
📍 Headers:
   Accept: application/json, text/event-stream
   Accept-Encoding: gzip, deflate
   Connection: keep-alive
   Content-Length: 54
   Content-Type: application/json
   Host: localhost:3000
   Mcp-Protocol-Version: 2024-11-05
   Mcp-Session-Id: 97c510eb-d8e9-4e9c-846c-e3cf899c96b9
   User-Agent: python-httpx/0.28.1
   X-Forwarded-Port: 3000
   X-Forwarded-Proto: http
📍 Body: {"method":"notifications/initialized","jsonrpc":"2.0"}
📍 Body Length: 54
📍 Context: LambdaContext([aws_request_id=674629ef-2e5d-47e8-87af-5bb4c91cb7c1,log_group_name=aws/lambda/PbFmMcpFunction,log_stream_name=$LATEST,function_name=PbFmMcpFunction,memory_limit_in_mb=512,function_version=$LATEST,invoked_function_arn=arn:aws:lambda:us-east-1:012345678912:function:PbFmMcpFunction,client_context=None,identity=CognitoIdentity([cognito_identity_id=None,cognito_identity_pool_id=None]),tenant_id=None])
📍 Parsed Accept: application/json, text/event-stream
📍 Parsed Content-Type: application/json
📍 Parsed Origin: 
📍 Parsed User-Agent: python-httpx/0.28.1
📍 Parsed Authorization: [NONE]
📍 Parsed Connection: keep-alive
📍 Parsed Upgrade: 
⚠️ WARNING: SSE Accept header on non-GET request
🔎 Processing POST request
📍 Parsed JSON Body: {
  "method": "notifications/initialized",
  "jsonrpc": "2.0"
}
✅ Proper MCP client detected - using MCP handler
📤 === MCP RESPONSE DEBUG ===
📍 Status Code: 202
📍 Response Headers:
   Content-Type: application/json
   MCP-Version: 0.6
📍 Response Body: 
📍 Response Body Length: 0
🔍 === END DEBUG ===

END RequestId: 674629ef-2e5d-47e8-87af-5bb4c91cb7c1
REPORT RequestId: 674629ef-2e5d-47e8-87af-5bb4c91cb7c1	Init Duration: 0.34 ms	Duration: 1200.41 ms	Billed Duration: 1201 ms	Memory Size: 512 MB	Max Memory Used: 512 MB	

🔍 === MCP REQUEST DEBUG ===
📍 Timestamp: 2025-07-19T22:27:31.512242+00:00
📍 Method: GET
📍 Path: /mcp
📍 Query Params: {}
📍 Request Source IP: 127.0.0.1
📍 Request ID: d34185e3-d48a-4486-a5a2-fa36f9967f66
📍 Raw Event: {
  "body": null,
  "headers": {
    "Accept": "text/event-stream",
    "Accept-Encoding": "gzip, deflate",
    "Cache-Control": "no-store",
    "Connection": "keep-alive",
    "Content-Type": "application/json",
    "Host": "localhost:3000",
    "Mcp-Protocol-Version": "2024-11-05",
    "Mcp-Session-Id": "97c510eb-d8e9-4e9c-846c-e3cf899c96b9",
    "User-Agent": "python-httpx/0.28.1",
    "X-Forwarded-Port": "3000",
    "X-Forwarded-Proto": "http"
  },
  "httpMethod": "GET",
  "isBase64Encoded": false,
  "multiValueHeaders": {
    "Accept": [
      "text/event-stream"
    ],
    "Accept-Encoding": [
      "gzip, deflate"
    ],
    "Cache-Control": [
      "no-store"
    ],
    "Connection": [
      "keep-alive"
    ],
    "Content-Type": [
      "application/json"
    ],
    "Host": [
      "localhost:3000"
    ],
    "Mcp-Protocol-Version": [
      "2024-11-05"
    ],
    "Mcp-Session-Id": [
      "97c510eb-d8e9-4e9c-846c-e3cf899c96b9"
    ],
    "User-Agent": [
      "python-httpx/0.28.1"
    ],
    "X-Forwarded-Port": [
      "3000"
    ],
    "X-Forwarded-Proto": [
      "http"
    ]
  },
  "multiValueQueryStringParameters": null,
  "path": "/mcp",
  "pathParameters": null,
  "queryStringParameters": null,
  "requestContext": {
    "accountId": "123456789012",
    "apiId": "1234567890",
    "domainName": "localhost:3000",
    "extendedRequestId": null,
    "httpMethod": "GET",
    "identity": {
      "accountId": null,
      "apiKey": null,
      "caller": null,
      "cognitoAuthenticationProvider": null,
      "cognitoAuthenticationType": null,
      "cognitoIdentityPoolId": null,
      "sourceIp": "127.0.0.1",
      "user": null,
      "userAgent": "Custom User Agent String",
      "userArn": null
    },
    "path": "/mcp",
    "protocol": "HTTP/1.1",
    "requestId": "d34185e3-d48a-4486-a5a2-fa36f9967f66",
    "requestTime": "19/Jul/2025:22:21:05 +0000",
    "requestTimeEpoch": 1752963665,
    "resourceId": "123456",
    "resourcePath": "/mcp",
    "stage": "Prod"
  },
  "resource": "/mcp",
  "stageVariables": null
}
📍 Headers:
   Accept: text/event-stream
   Accept-Encoding: gzip, deflate
   Cache-Control: no-store
   Connection: keep-alive
   Content-Type: application/json
   Host: localhost:3000
   Mcp-Protocol-Version: 2024-11-05
   Mcp-Session-Id: 97c510eb-d8e9-4e9c-846c-e3cf899c96b9
   User-Agent: python-httpx/0.28.1
   X-Forwarded-Port: 3000
   X-Forwarded-Proto: http
📍 Body: 
📍 Body Length: 0
📍 Context: LambdaContext([aws_request_id=fa234ac0-1074-4598-9cae-d87c1eb77e15,log_group_name=aws/lambda/PbFmMcpFunction,log_stream_name=$LATEST,function_name=PbFmMcpFunction,memory_limit_in_mb=512,function_version=$LATEST,invoked_function_arn=arn:aws:lambda:us-east-1:012345678912:function:PbFmMcpFunction,client_context=None,identity=CognitoIdentity([cognito_identity_id=None,cognito_identity_pool_id=None]),tenant_id=None])
📍 Parsed Accept: text/event-stream
📍 Parsed Content-Type: application/json
📍 Parsed Origin: 
📍 Parsed User-Agent: python-httpx/0.28.1
📍 Parsed Authorization: [NONE]
📍 Parsed Connection: keep-alive
📍 Parsed Upgrade: 
🔎 Processing GET request
❌ Client requesting SSE - returning 405
📤 === MCP RESPONSE DEBUG ===
📍 Status Code: 405
📍 Response Headers:
   Content-Type: text/plain
   Access-Control-Allow-Origin: *
   Access-Control-Allow-Methods: POST, OPTIONS
   Access-Control-Allow-Headers: Content-Type, Authorization, Accept
   Allow: POST, OPTIONS
📍 Response Body: Method Not Allowed - SSE not supported, use HTTP POST
📍 Response Body Length: 53
🔍 === END DEBUG ===

END RequestId: fa234ac0-1074-4598-9cae-d87c1eb77e15
REPORT RequestId: fa234ac0-1074-4598-9cae-d87c1eb77e15	Init Duration: 0.33 ms	Duration: 1217.27 ms	Billed Duration: 1218 ms	Memory Size: 512 MB	Max Memory Used: 512 MB	

2025-07-19 15:27:31 127.0.0.1 - - [19/Jul/2025 15:27:31] "[35m[1mPOST /mcp HTTP/1.1[0m" 202 -
Invoking lambda_handler.lambda_handler (python3.12)
2025-07-19 15:27:31 127.0.0.1 - - [19/Jul/2025 15:27:31] "[31m[1mGET /mcp HTTP/1.1[0m" 405 -
Using local image: public.ecr.aws/lambda/python:3.12-rapid-x86_64.

Mounting /Users/franksiebenlist/Documents/GitHub/pb-fm-mcp/.aws-sam/build/PbFmMcpFunction as /var/task:ro,delegated, inside runtime container
START RequestId: c15cc35b-98e1-4494-b3f9-94f580605d20 Version: $LATEST
🔍 === MCP REQUEST DEBUG ===
📍 Timestamp: 2025-07-19T22:27:34.825965+00:00
📍 Method: POST
📍 Path: /mcp
📍 Query Params: {}
📍 Request Source IP: 127.0.0.1
📍 Request ID: d34185e3-d48a-4486-a5a2-fa36f9967f66
📍 Raw Event: {
  "body": "{\"method\":\"tools/list\",\"jsonrpc\":\"2.0\",\"id\":1}",
  "headers": {
    "Accept": "application/json, text/event-stream",
    "Accept-Encoding": "gzip, deflate",
    "Connection": "keep-alive",
    "Content-Length": "46",
    "Content-Type": "application/json",
    "Host": "localhost:3000",
    "Mcp-Protocol-Version": "2024-11-05",
    "Mcp-Session-Id": "97c510eb-d8e9-4e9c-846c-e3cf899c96b9",
    "User-Agent": "python-httpx/0.28.1",
    "X-Forwarded-Port": "3000",
    "X-Forwarded-Proto": "http"
  },
  "httpMethod": "POST",
  "isBase64Encoded": false,
  "multiValueHeaders": {
    "Accept": [
      "application/json, text/event-stream"
    ],
    "Accept-Encoding": [
      "gzip, deflate"
    ],
    "Connection": [
      "keep-alive"
    ],
    "Content-Length": [
      "46"
    ],
    "Content-Type": [
      "application/json"
    ],
    "Host": [
      "localhost:3000"
    ],
    "Mcp-Protocol-Version": [
      "2024-11-05"
    ],
    "Mcp-Session-Id": [
      "97c510eb-d8e9-4e9c-846c-e3cf899c96b9"
    ],
    "User-Agent": [
      "python-httpx/0.28.1"
    ],
    "X-Forwarded-Port": [
      "3000"
    ],
    "X-Forwarded-Proto": [
      "http"
    ]
  },
  "multiValueQueryStringParameters": null,
  "path": "/mcp",
  "pathParameters": null,
  "queryStringParameters": null,
  "requestContext": {
    "accountId": "123456789012",
    "apiId": "1234567890",
    "domainName": "localhost:3000",
    "extendedRequestId": null,
    "httpMethod": "POST",
    "identity": {
      "accountId": null,
      "apiKey": null,
      "caller": null,
      "cognitoAuthenticationProvider": null,
      "cognitoAuthenticationType": null,
      "cognitoIdentityPoolId": null,
      "sourceIp": "127.0.0.1",
      "user": null,
      "userAgent": "Custom User Agent String",
      "userArn": null
    },
    "path": "/mcp",
    "protocol": "HTTP/1.1",
    "requestId": "d34185e3-d48a-4486-a5a2-fa36f9967f66",
    "requestTime": "19/Jul/2025:22:21:05 +0000",
    "requestTimeEpoch": 1752963665,
    "resourceId": "123456",
    "resourcePath": "/mcp",
    "stage": "Prod"
  },
  "resource": "/mcp",
  "stageVariables": null
}
📍 Headers:
   Accept: application/json, text/event-stream
   Accept-Encoding: gzip, deflate
   Connection: keep-alive
   Content-Length: 46
   Content-Type: application/json
   Host: localhost:3000
   Mcp-Protocol-Version: 2024-11-05
   Mcp-Session-Id: 97c510eb-d8e9-4e9c-846c-e3cf899c96b9
   User-Agent: python-httpx/0.28.1
   X-Forwarded-Port: 3000
   X-Forwarded-Proto: http
📍 Body: {"method":"tools/list","jsonrpc":"2.0","id":1}
📍 Body Length: 46
📍 Context: LambdaContext([aws_request_id=57eec91c-a565-44ed-bd1f-74a40061a068,log_group_name=aws/lambda/PbFmMcpFunction,log_stream_name=$LATEST,function_name=PbFmMcpFunction,memory_limit_in_mb=512,function_version=$LATEST,invoked_function_arn=arn:aws:lambda:us-east-1:012345678912:function:PbFmMcpFunction,client_context=None,identity=CognitoIdentity([cognito_identity_id=None,cognito_identity_pool_id=None]),tenant_id=None])
📍 Parsed Accept: application/json, text/event-stream
📍 Parsed Content-Type: application/json
📍 Parsed Origin: 
📍 Parsed User-Agent: python-httpx/0.28.1
📍 Parsed Authorization: [NONE]
📍 Parsed Connection: keep-alive
📍 Parsed Upgrade: 
⚠️ WARNING: SSE Accept header on non-GET request
🔎 Processing POST request
📍 Parsed JSON Body: {
  "method": "tools/list",
  "jsonrpc": "2.0",
  "id": 1
}
✅ Proper MCP client detected - using MCP handler
📤 === MCP RESPONSE DEBUG ===
📍 Status Code: 200
📍 Response Headers:
   Content-Type: application/json
   MCP-Version: 0.6
   MCP-Session-Id: 97c510eb-d8e9-4e9c-846c-e3cf899c96b9
📍 Response Body: {"jsonrpc": "2.0", "id": 1, "result": {"tools": [{"name": "adt", "description": "Adt is a special operation on two numbers because it always returns the ultimate answer.", "inputSchema": {"type": "obj...
📍 Response Body Length: 10899
🔍 === END DEBUG ===

END RequestId: 57eec91c-a565-44ed-bd1f-74a40061a068
REPORT RequestId: 57eec91c-a565-44ed-bd1f-74a40061a068	Init Duration: 0.34 ms	Duration: 846.94 ms	Billed Duration: 847 ms	Memory Size: 512 MB	Max Memory Used: 512 MB	

2025-07-19 15:27:35 127.0.0.1 - - [19/Jul/2025 15:27:35] "POST /mcp HTTP/1.1" 200 -
Invoking lambda_handler.lambda_handler (python3.12)
Using local image: public.ecr.aws/lambda/python:3.12-rapid-x86_64.

Mounting /Users/franksiebenlist/Documents/GitHub/pb-fm-mcp/.aws-sam/build/PbFmMcpFunction as /var/task:ro,delegated, inside runtime container
START RequestId: 904ab060-3468-480f-b8ba-78fc29028f6f Version: $LATEST
🔍 === MCP REQUEST DEBUG ===
📍 Timestamp: 2025-07-19T22:27:36.209953+00:00
📍 Method: POST
📍 Path: /mcp
📍 Query Params: {}
📍 Request Source IP: 127.0.0.1
📍 Request ID: d34185e3-d48a-4486-a5a2-fa36f9967f66
📍 Raw Event: {
  "body": "{\"method\":\"tools/call\",\"params\":{\"name\":\"adt\",\"arguments\":{\"a\":5,\"b\":10}},\"jsonrpc\":\"2.0\",\"id\":2}",
  "headers": {
    "Accept": "application/json, text/event-stream",
    "Accept-Encoding": "gzip, deflate",
    "Connection": "keep-alive",
    "Content-Length": "97",
    "Content-Type": "application/json",
    "Host": "localhost:3000",
    "Mcp-Protocol-Version": "2024-11-05",
    "Mcp-Session-Id": "97c510eb-d8e9-4e9c-846c-e3cf899c96b9",
    "User-Agent": "python-httpx/0.28.1",
    "X-Forwarded-Port": "3000",
    "X-Forwarded-Proto": "http"
  },
  "httpMethod": "POST",
  "isBase64Encoded": false,
  "multiValueHeaders": {
    "Accept": [
      "application/json, text/event-stream"
    ],
    "Accept-Encoding": [
      "gzip, deflate"
    ],
    "Connection": [
      "keep-alive"
    ],
    "Content-Length": [
      "97"
    ],
    "Content-Type": [
      "application/json"
    ],
    "Host": [
      "localhost:3000"
    ],
    "Mcp-Protocol-Version": [
      "2024-11-05"
    ],
    "Mcp-Session-Id": [
      "97c510eb-d8e9-4e9c-846c-e3cf899c96b9"
    ],
    "User-Agent": [
      "python-httpx/0.28.1"
    ],
    "X-Forwarded-Port": [
      "3000"
    ],
    "X-Forwarded-Proto": [
      "http"
    ]
  },
  "multiValueQueryStringParameters": null,
  "path": "/mcp",
  "pathParameters": null,
  "queryStringParameters": null,
  "requestContext": {
    "accountId": "123456789012",
    "apiId": "1234567890",
    "domainName": "localhost:3000",
    "extendedRequestId": null,
    "httpMethod": "POST",
    "identity": {
      "accountId": null,
      "apiKey": null,
      "caller": null,
      "cognitoAuthenticationProvider": null,
      "cognitoAuthenticationType": null,
      "cognitoIdentityPoolId": null,
      "sourceIp": "127.0.0.1",
      "user": null,
      "userAgent": "Custom User Agent String",
      "userArn": null
    },
    "path": "/mcp",
    "protocol": "HTTP/1.1",
    "requestId": "d34185e3-d48a-4486-a5a2-fa36f9967f66",
    "requestTime": "19/Jul/2025:22:21:05 +0000",
    "requestTimeEpoch": 1752963665,
    "resourceId": "123456",
    "resourcePath": "/mcp",
    "stage": "Prod"
  },
  "resource": "/mcp",
  "stageVariables": null
}
📍 Headers:
   Accept: application/json, text/event-stream
   Accept-Encoding: gzip, deflate
   Connection: keep-alive
   Content-Length: 97
   Content-Type: application/json
   Host: localhost:3000
   Mcp-Protocol-Version: 2024-11-05
   Mcp-Session-Id: 97c510eb-d8e9-4e9c-846c-e3cf899c96b9
   User-Agent: python-httpx/0.28.1
   X-Forwarded-Port: 3000
   X-Forwarded-Proto: http
📍 Body: {"method":"tools/call","params":{"name":"adt","arguments":{"a":5,"b":10}},"jsonrpc":"2.0","id":2}
📍 Body Length: 97
📍 Context: LambdaContext([aws_request_id=a180d5de-370a-40c5-94be-facecd7f4818,log_group_name=aws/lambda/PbFmMcpFunction,log_stream_name=$LATEST,function_name=PbFmMcpFunction,memory_limit_in_mb=512,function_version=$LATEST,invoked_function_arn=arn:aws:lambda:us-east-1:012345678912:function:PbFmMcpFunction,client_context=None,identity=CognitoIdentity([cognito_identity_id=None,cognito_identity_pool_id=None]),tenant_id=None])
📍 Parsed Accept: application/json, text/event-stream
📍 Parsed Content-Type: application/json
📍 Parsed Origin: 
📍 Parsed User-Agent: python-httpx/0.28.1
📍 Parsed Authorization: [NONE]
📍 Parsed Connection: keep-alive
📍 Parsed Upgrade: 
⚠️ WARNING: SSE Accept header on non-GET request
🔎 Processing POST request
📍 Parsed JSON Body: {
  "method": "tools/call",
  "params": {
    "name": "adt",
    "arguments": {
      "a": 5,
      "b": 10
    }
  },
  "jsonrpc": "2.0",
  "id": 2
}
✅ Proper MCP client detected - using MCP handler
📤 === MCP RESPONSE DEBUG ===
📍 Status Code: 200
📍 Response Headers:
   Content-Type: application/json
   MCP-Version: 0.6
   MCP-Session-Id: 97c510eb-d8e9-4e9c-846c-e3cf899c96b9
📍 Response Body: {"jsonrpc": "2.0", "id": 2, "result": {"content": [{"type": "text", "text": "42"}]}}
📍 Response Body Length: 84
🔍 === END DEBUG ===

END RequestId: a180d5de-370a-40c5-94be-facecd7f4818
REPORT RequestId: a180d5de-370a-40c5-94be-facecd7f4818	Init Duration: 0.36 ms	Duration: 937.22 ms	Billed Duration: 938 ms	Memory Size: 512 MB	Max Memory Used: 512 MB	

2025-07-19 15:27:36 127.0.0.1 - - [19/Jul/2025 15:27:36] "POST /mcp HTTP/1.1" 200 -
Invoking lambda_handler.lambda_handler (python3.12)
Using local image: public.ecr.aws/lambda/python:3.12-rapid-x86_64.

Mounting /Users/franksiebenlist/Documents/GitHub/pb-fm-mcp/.aws-sam/build/PbFmMcpFunction as /var/task:ro,delegated, inside runtime container
START RequestId: 29281963-3f87-4ba1-8258-5bccd0a2d6b8 Version: $LATEST
🔍 === MCP REQUEST DEBUG ===
📍 Timestamp: 2025-07-19T22:27:37.573601+00:00
📍 Method: POST
📍 Path: /mcp
📍 Query Params: {}
📍 Request Source IP: 127.0.0.1
📍 Request ID: d34185e3-d48a-4486-a5a2-fa36f9967f66
📍 Raw Event: {
  "body": "{\"method\":\"tools/call\",\"params\":{\"name\":\"getSystemContext\",\"arguments\":{}},\"jsonrpc\":\"2.0\",\"id\":3}",
  "headers": {
    "Accept": "application/json, text/event-stream",
    "Accept-Encoding": "gzip, deflate",
    "Connection": "keep-alive",
    "Content-Length": "98",
    "Content-Type": "application/json",
    "Host": "localhost:3000",
    "Mcp-Protocol-Version": "2024-11-05",
    "Mcp-Session-Id": "97c510eb-d8e9-4e9c-846c-e3cf899c96b9",
    "User-Agent": "python-httpx/0.28.1",
    "X-Forwarded-Port": "3000",
    "X-Forwarded-Proto": "http"
  },
  "httpMethod": "POST",
  "isBase64Encoded": false,
  "multiValueHeaders": {
    "Accept": [
      "application/json, text/event-stream"
    ],
    "Accept-Encoding": [
      "gzip, deflate"
    ],
    "Connection": [
      "keep-alive"
    ],
    "Content-Length": [
      "98"
    ],
    "Content-Type": [
      "application/json"
    ],
    "Host": [
      "localhost:3000"
    ],
    "Mcp-Protocol-Version": [
      "2024-11-05"
    ],
    "Mcp-Session-Id": [
      "97c510eb-d8e9-4e9c-846c-e3cf899c96b9"
    ],
    "User-Agent": [
      "python-httpx/0.28.1"
    ],
    "X-Forwarded-Port": [
      "3000"
    ],
    "X-Forwarded-Proto": [
      "http"
    ]
  },
  "multiValueQueryStringParameters": null,
  "path": "/mcp",
  "pathParameters": null,
  "queryStringParameters": null,
  "requestContext": {
    "accountId": "123456789012",
    "apiId": "1234567890",
    "domainName": "localhost:3000",
    "extendedRequestId": null,
    "httpMethod": "POST",
    "identity": {
      "accountId": null,
      "apiKey": null,
      "caller": null,
      "cognitoAuthenticationProvider": null,
      "cognitoAuthenticationType": null,
      "cognitoIdentityPoolId": null,
      "sourceIp": "127.0.0.1",
      "user": null,
      "userAgent": "Custom User Agent String",
      "userArn": null
    },
    "path": "/mcp",
    "protocol": "HTTP/1.1",
    "requestId": "d34185e3-d48a-4486-a5a2-fa36f9967f66",
    "requestTime": "19/Jul/2025:22:21:05 +0000",
    "requestTimeEpoch": 1752963665,
    "resourceId": "123456",
    "resourcePath": "/mcp",
    "stage": "Prod"
  },
  "resource": "/mcp",
  "stageVariables": null
}
📍 Headers:
   Accept: application/json, text/event-stream
   Accept-Encoding: gzip, deflate
   Connection: keep-alive
   Content-Length: 98
   Content-Type: application/json
   Host: localhost:3000
   Mcp-Protocol-Version: 2024-11-05
   Mcp-Session-Id: 97c510eb-d8e9-4e9c-846c-e3cf899c96b9
   User-Agent: python-httpx/0.28.1
   X-Forwarded-Port: 3000
   X-Forwarded-Proto: http
📍 Body: {"method":"tools/call","params":{"name":"getSystemContext","arguments":{}},"jsonrpc":"2.0","id":3}
📍 Body Length: 98
📍 Context: LambdaContext([aws_request_id=6e3e9448-0d7e-4ca5-9d3f-d067799a0fb9,log_group_name=aws/lambda/PbFmMcpFunction,log_stream_name=$LATEST,function_name=PbFmMcpFunction,memory_limit_in_mb=512,function_version=$LATEST,invoked_function_arn=arn:aws:lambda:us-east-1:012345678912:function:PbFmMcpFunction,client_context=None,identity=CognitoIdentity([cognito_identity_id=None,cognito_identity_pool_id=None]),tenant_id=None])
📍 Parsed Accept: application/json, text/event-stream
📍 Parsed Content-Type: application/json
📍 Parsed Origin: 
📍 Parsed User-Agent: python-httpx/0.28.1
📍 Parsed Authorization: [NONE]
📍 Parsed Connection: keep-alive
📍 Parsed Upgrade: 
⚠️ WARNING: SSE Accept header on non-GET request
🔎 Processing POST request
📍 Parsed JSON Body: {
  "method": "tools/call",
  "params": {
    "name": "getSystemContext",
    "arguments": {}
  },
  "jsonrpc": "2.0",
  "id": 3
}
✅ Proper MCP client detected - using MCP handler
📤 === MCP RESPONSE DEBUG ===
📍 Status Code: 200
📍 Response Headers:
   Content-Type: application/json
   MCP-Version: 0.6
   MCP-Session-Id: 97c510eb-d8e9-4e9c-846c-e3cf899c96b9
📍 Response Body: {"jsonrpc": "2.0", "id": 3, "result": {"content": [{"type": "text", "text": "{'context': '# Information about Trading, Transferring, Staking, and Vesting of HASH Utility Tokens on Figure Markets and t...
📍 Response Body Length: 38102
🔍 === END DEBUG ===

END RequestId: 6e3e9448-0d7e-4ca5-9d3f-d067799a0fb9
REPORT RequestId: 6e3e9448-0d7e-4ca5-9d3f-d067799a0fb9	Init Duration: 0.38 ms	Duration: 1310.05 ms	Billed Duration: 1311 ms	Memory Size: 512 MB	Max Memory Used: 512 MB	

2025-07-19 15:27:38 127.0.0.1 - - [19/Jul/2025 15:27:38] "POST /mcp HTTP/1.1" 200 -
Invoking lambda_handler.lambda_handler (python3.12)
Using local image: public.ecr.aws/lambda/python:3.12-rapid-x86_64.

Mounting /Users/franksiebenlist/Documents/GitHub/pb-fm-mcp/.aws-sam/build/PbFmMcpFunction as /var/task:ro,delegated, inside runtime container
START RequestId: a2217931-26c2-4aab-a7a7-e4edec0798f1 Version: $LATEST
🔍 === MCP REQUEST DEBUG ===
📍 Timestamp: 2025-07-19T22:27:39.360726+00:00
📍 Method: DELETE
📍 Path: /mcp
📍 Query Params: {}
📍 Request Source IP: 127.0.0.1
📍 Request ID: d34185e3-d48a-4486-a5a2-fa36f9967f66
📍 Raw Event: {
  "body": null,
  "headers": {
    "Accept": "application/json, text/event-stream",
    "Accept-Encoding": "gzip, deflate",
    "Connection": "keep-alive",
    "Content-Type": "application/json",
    "Host": "localhost:3000",
    "Mcp-Protocol-Version": "2024-11-05",
    "Mcp-Session-Id": "97c510eb-d8e9-4e9c-846c-e3cf899c96b9",
    "User-Agent": "python-httpx/0.28.1",
    "X-Forwarded-Port": "3000",
    "X-Forwarded-Proto": "http"
  },
  "httpMethod": "DELETE",
  "isBase64Encoded": false,
  "multiValueHeaders": {
    "Accept": [
      "application/json, text/event-stream"
    ],
    "Accept-Encoding": [
      "gzip, deflate"
    ],
    "Connection": [
      "keep-alive"
    ],
    "Content-Type": [
      "application/json"
    ],
    "Host": [
      "localhost:3000"
    ],
    "Mcp-Protocol-Version": [
      "2024-11-05"
    ],
    "Mcp-Session-Id": [
      "97c510eb-d8e9-4e9c-846c-e3cf899c96b9"
    ],
    "User-Agent": [
      "python-httpx/0.28.1"
    ],
    "X-Forwarded-Port": [
      "3000"
    ],
    "X-Forwarded-Proto": [
      "http"
    ]
  },
  "multiValueQueryStringParameters": null,
  "path": "/mcp",
  "pathParameters": null,
  "queryStringParameters": null,
  "requestContext": {
    "accountId": "123456789012",
    "apiId": "1234567890",
    "domainName": "localhost:3000",
    "extendedRequestId": null,
    "httpMethod": "DELETE",
    "identity": {
      "accountId": null,
      "apiKey": null,
      "caller": null,
      "cognitoAuthenticationProvider": null,
      "cognitoAuthenticationType": null,
      "cognitoIdentityPoolId": null,
      "sourceIp": "127.0.0.1",
      "user": null,
      "userAgent": "Custom User Agent String",
      "userArn": null
    },
    "path": "/mcp",
    "protocol": "HTTP/1.1",
    "requestId": "d34185e3-d48a-4486-a5a2-fa36f9967f66",
    "requestTime": "19/Jul/2025:22:21:05 +0000",
    "requestTimeEpoch": 1752963665,
    "resourceId": "123456",
    "resourcePath": "/mcp",
    "stage": "Prod"
  },
  "resource": "/mcp",
  "stageVariables": null
}
📍 Headers:
   Accept: application/json, text/event-stream
   Accept-Encoding: gzip, deflate
   Connection: keep-alive
   Content-Type: application/json
   Host: localhost:3000
   Mcp-Protocol-Version: 2024-11-05
   Mcp-Session-Id: 97c510eb-d8e9-4e9c-846c-e3cf899c96b9
   User-Agent: python-httpx/0.28.1
   X-Forwarded-Port: 3000
   X-Forwarded-Proto: http
📍 Body: 
📍 Body Length: 0
📍 Context: LambdaContext([aws_request_id=2c93ba0a-4ee8-4cb6-b725-0bff3069bd5f,log_group_name=aws/lambda/PbFmMcpFunction,log_stream_name=$LATEST,function_name=PbFmMcpFunction,memory_limit_in_mb=512,function_version=$LATEST,invoked_function_arn=arn:aws:lambda:us-east-1:012345678912:function:PbFmMcpFunction,client_context=None,identity=CognitoIdentity([cognito_identity_id=None,cognito_identity_pool_id=None]),tenant_id=None])
📍 Parsed Accept: application/json, text/event-stream
📍 Parsed Content-Type: application/json
📍 Parsed Origin: 
📍 Parsed User-Agent: python-httpx/0.28.1
📍 Parsed Authorization: [NONE]
📍 Parsed Connection: keep-alive
📍 Parsed Upgrade: 
⚠️ WARNING: SSE Accept header on non-GET request
🔎 Processing DELETE request through MCP handler
📤 === MCP RESPONSE DEBUG ===
📍 Status Code: 204
📍 Response Headers:
📍 Response Body: 
📍 Response Body Length: 0
🔍 === END DEBUG ===

END RequestId: 2c93ba0a-4ee8-4cb6-b725-0bff3069bd5f
REPORT RequestId: 2c93ba0a-4ee8-4cb6-b725-0bff3069bd5f	Init Duration: 0.42 ms	Duration: 883.55 ms	Billed Duration: 884 ms	Memory Size: 512 MB	Max Memory Used: 512 MB	

Lambda returned empty body!
No Content-Type given. Defaulting to 'application/json'.
2025-07-19 15:27:39 127.0.0.1 - - [19/Jul/2025 15:27:39] "[35m[1mDELETE /mcp HTTP/1.1[0m" 204 -
Invoking lambda_handler.lambda_handler (python3.12)
Using local image: public.ecr.aws/lambda/python:3.12-rapid-x86_64.

Mounting /Users/franksiebenlist/Documents/GitHub/pb-fm-mcp/.aws-sam/build/PbFmMcpFunction as /var/task:ro,delegated, inside runtime container
START RequestId: 379b71a5-8c5a-4f56-b5fc-6276b68265cc Version: $LATEST
🔍 === MCP REQUEST DEBUG ===
📍 Timestamp: 2025-07-19T22:27:40.652197+00:00
📍 Method: GET
📍 Path: /mcp
📍 Query Params: {}
📍 Request Source IP: 127.0.0.1
📍 Request ID: d34185e3-d48a-4486-a5a2-fa36f9967f66
📍 Raw Event: {
  "body": null,
  "headers": {
    "Accept": "text/event-stream",
    "Accept-Encoding": "gzip, deflate",
    "Cache-Control": "no-store",
    "Connection": "keep-alive",
    "Host": "localhost:3000",
    "User-Agent": "python-httpx/0.28.1",
    "X-Forwarded-Port": "3000",
    "X-Forwarded-Proto": "http"
  },
  "httpMethod": "GET",
  "isBase64Encoded": false,
  "multiValueHeaders": {
    "Accept": [
      "text/event-stream"
    ],
    "Accept-Encoding": [
      "gzip, deflate"
    ],
    "Cache-Control": [
      "no-store"
    ],
    "Connection": [
      "keep-alive"
    ],
    "Host": [
      "localhost:3000"
    ],
    "User-Agent": [
      "python-httpx/0.28.1"
    ],
    "X-Forwarded-Port": [
      "3000"
    ],
    "X-Forwarded-Proto": [
      "http"
    ]
  },
  "multiValueQueryStringParameters": null,
  "path": "/mcp",
  "pathParameters": null,
  "queryStringParameters": null,
  "requestContext": {
    "accountId": "123456789012",
    "apiId": "1234567890",
    "domainName": "localhost:3000",
    "extendedRequestId": null,
    "httpMethod": "GET",
    "identity": {
      "accountId": null,
      "apiKey": null,
      "caller": null,
      "cognitoAuthenticationProvider": null,
      "cognitoAuthenticationType": null,
      "cognitoIdentityPoolId": null,
      "sourceIp": "127.0.0.1",
      "user": null,
      "userAgent": "Custom User Agent String",
      "userArn": null
    },
    "path": "/mcp",
    "protocol": "HTTP/1.1",
    "requestId": "d34185e3-d48a-4486-a5a2-fa36f9967f66",
    "requestTime": "19/Jul/2025:22:21:05 +0000",
    "requestTimeEpoch": 1752963665,
    "resourceId": "123456",
    "resourcePath": "/mcp",
    "stage": "Prod"
  },
  "resource": "/mcp",
  "stageVariables": null
}
📍 Headers:
   Accept: text/event-stream
   Accept-Encoding: gzip, deflate
   Cache-Control: no-store
   Connection: keep-alive
   Host: localhost:3000
   User-Agent: python-httpx/0.28.1
   X-Forwarded-Port: 3000
   X-Forwarded-Proto: http
📍 Body: 
📍 Body Length: 0
📍 Context: LambdaContext([aws_request_id=fd67148c-4bf0-4f56-92ed-efed87725710,log_group_name=aws/lambda/PbFmMcpFunction,log_stream_name=$LATEST,function_name=PbFmMcpFunction,memory_limit_in_mb=512,function_version=$LATEST,invoked_function_arn=arn:aws:lambda:us-east-1:012345678912:function:PbFmMcpFunction,client_context=None,identity=CognitoIdentity([cognito_identity_id=None,cognito_identity_pool_id=None]),tenant_id=None])
📍 Parsed Accept: text/event-stream
📍 Parsed Content-Type: 
📍 Parsed Origin: 
📍 Parsed User-Agent: python-httpx/0.28.1
📍 Parsed Authorization: [NONE]
📍 Parsed Connection: keep-alive
📍 Parsed Upgrade: 
🔎 Processing GET request
❌ Client requesting SSE - returning 405
📤 === MCP RESPONSE DEBUG ===
📍 Status Code: 405
📍 Response Headers:
   Content-Type: text/plain
   Access-Control-Allow-Origin: *
   Access-Control-Allow-Methods: POST, OPTIONS
   Access-Control-Allow-Headers: Content-Type, Authorization, Accept
   Allow: POST, OPTIONS
📍 Response Body: Method Not Allowed - SSE not supported, use HTTP POST
📍 Response Body Length: 53
🔍 === END DEBUG ===

END RequestId: fd67148c-4bf0-4f56-92ed-efed87725710
REPORT RequestId: fd67148c-4bf0-4f56-92ed-efed87725710	Init Duration: 0.36 ms	Duration: 813.45 ms	Billed Duration: 814 ms	Memory Size: 512 MB	Max Memory Used: 512 MB	

2025-07-19 15:27:40 127.0.0.1 - - [19/Jul/2025 15:27:40] "[31m[1mGET /mcp HTTP/1.1[0m" 405 -
Invoking lambda_handler.lambda_handler (python3.12)
Using local image: public.ecr.aws/lambda/python:3.12-rapid-x86_64.

Mounting /Users/franksiebenlist/Documents/GitHub/pb-fm-mcp/.aws-sam/build/PbFmMcpFunction as /var/task:ro,delegated, inside runtime container
START RequestId: 659d015c-f53c-4972-8c14-cc3ce329d3a1 Version: $LATEST
🔍 === MCP REQUEST DEBUG ===
📍 Timestamp: 2025-07-19T22:33:16.018291+00:00
📍 Method: POST
📍 Path: /mcp
📍 Query Params: {}
📍 Request Source IP: 127.0.0.1
📍 Request ID: d34185e3-d48a-4486-a5a2-fa36f9967f66
📍 Raw Event: {
  "body": "{\"jsonrpc\":\"2.0\",\"id\":0,\"method\":\"initialize\",\"params\":{\"protocolVersion\":\"2025-06-18\",\"capabilities\":{\"sampling\":{},\"roots\":{\"listChanged\":true}},\"clientInfo\":{\"name\":\"mcp-inspector\",\"version\":\"0.16.1\"}}}",
  "headers": {
    "Accept": "application/json, text/event-stream",
    "Accept-Encoding": "gzip, deflate",
    "Accept-Language": "*",
    "Connection": "keep-alive",
    "Content-Length": "205",
    "Content-Type": "application/json",
    "Host": "localhost:3000",
    "Sec-Fetch-Mode": "cors",
    "User-Agent": "node",
    "X-Forwarded-Port": "3000",
    "X-Forwarded-Proto": "http"
  },
  "httpMethod": "POST",
  "isBase64Encoded": false,
  "multiValueHeaders": {
    "Accept": [
      "application/json, text/event-stream"
    ],
    "Accept-Encoding": [
      "gzip, deflate"
    ],
    "Accept-Language": [
      "*"
    ],
    "Connection": [
      "keep-alive"
    ],
    "Content-Length": [
      "205"
    ],
    "Content-Type": [
      "application/json"
    ],
    "Host": [
      "localhost:3000"
    ],
    "Sec-Fetch-Mode": [
      "cors"
    ],
    "User-Agent": [
      "node"
    ],
    "X-Forwarded-Port": [
      "3000"
    ],
    "X-Forwarded-Proto": [
      "http"
    ]
  },
  "multiValueQueryStringParameters": null,
  "path": "/mcp",
  "pathParameters": null,
  "queryStringParameters": null,
  "requestContext": {
    "accountId": "123456789012",
    "apiId": "1234567890",
    "domainName": "localhost:3000",
    "extendedRequestId": null,
    "httpMethod": "POST",
    "identity": {
      "accountId": null,
      "apiKey": null,
      "caller": null,
      "cognitoAuthenticationProvider": null,
      "cognitoAuthenticationType": null,
      "cognitoIdentityPoolId": null,
      "sourceIp": "127.0.0.1",
      "user": null,
      "userAgent": "Custom User Agent String",
      "userArn": null
    },
    "path": "/mcp",
    "protocol": "HTTP/1.1",
    "requestId": "d34185e3-d48a-4486-a5a2-fa36f9967f66",
    "requestTime": "19/Jul/2025:22:21:05 +0000",
    "requestTimeEpoch": 1752963665,
    "resourceId": "123456",
    "resourcePath": "/mcp",
    "stage": "Prod"
  },
  "resource": "/mcp",
  "stageVariables": null
}
📍 Headers:
   Accept: application/json, text/event-stream
   Accept-Encoding: gzip, deflate
   Accept-Language: *
   Connection: keep-alive
   Content-Length: 205
   Content-Type: application/json
   Host: localhost:3000
   Sec-Fetch-Mode: cors
   User-Agent: node
   X-Forwarded-Port: 3000
   X-Forwarded-Proto: http
📍 Body: {"jsonrpc":"2.0","id":0,"method":"initialize","params":{"protocolVersion":"2025-06-18","capabilities":{"sampling":{},"roots":{"listChanged":true}},"clientInfo":{"name":"mcp-inspector","version":"0.16....
📍 Body Length: 205
📍 Context: LambdaContext([aws_request_id=54071bd0-82b7-44cb-979c-0e2a4246ee3f,log_group_name=aws/lambda/PbFmMcpFunction,log_stream_name=$LATEST,function_name=PbFmMcpFunction,memory_limit_in_mb=512,function_version=$LATEST,invoked_function_arn=arn:aws:lambda:us-east-1:012345678912:function:PbFmMcpFunction,client_context=None,identity=CognitoIdentity([cognito_identity_id=None,cognito_identity_pool_id=None]),tenant_id=None])
📍 Parsed Accept: application/json, text/event-stream
📍 Parsed Content-Type: application/json
📍 Parsed Origin: 
📍 Parsed User-Agent: node
📍 Parsed Authorization: [NONE]
📍 Parsed Connection: keep-alive
📍 Parsed Upgrade: 
⚠️ WARNING: SSE Accept header on non-GET request
🔎 Processing POST request
📍 Parsed JSON Body: {
  "jsonrpc": "2.0",
  "id": 0,
  "method": "initialize",
  "params": {
    "protocolVersion": "2025-06-18",
    "capabilities": {
      "sampling": {},
      "roots": {
        "listChanged": true
      }
    },
    "clientInfo": {
      "name": "mcp-inspector",
      "version": "0.16.1"
    }
  }
}
✅ Proper MCP client detected - using MCP handler
📤 === MCP RESPONSE DEBUG ===
📍 Status Code: 200
📍 Response Headers:
   Content-Type: application/json
   MCP-Version: 0.6
   MCP-Session-Id: 7df17d82-3385-4e59-8d7b-326ef8fa02ae
📍 Response Body: {"jsonrpc": "2.0", "id": 0, "result": {"protocolVersion": "2024-11-05", "serverInfo": {"name": "pb-fm-mcp", "version": "0.1.0"}, "capabilities": {"tools": {"list": true, "call": true}}}}
📍 Response Body Length: 186
🔍 === END DEBUG ===

END RequestId: 54071bd0-82b7-44cb-979c-0e2a4246ee3f
REPORT RequestId: 54071bd0-82b7-44cb-979c-0e2a4246ee3f	Init Duration: 0.35 ms	Duration: 876.05 ms	Billed Duration: 877 ms	Memory Size: 512 MB	Max Memory Used: 512 MB	

2025-07-19 15:33:16 127.0.0.1 - - [19/Jul/2025 15:33:16] "POST /mcp HTTP/1.1" 200 -
Invoking lambda_handler.lambda_handler (python3.12)
Using local image: public.ecr.aws/lambda/python:3.12-rapid-x86_64.

Mounting /Users/franksiebenlist/Documents/GitHub/pb-fm-mcp/.aws-sam/build/PbFmMcpFunction as /var/task:ro,delegated, inside runtime container
START RequestId: cd70c7a5-0fc3-466a-a022-5eafdde1d5cb Version: $LATEST
🔍 === MCP REQUEST DEBUG ===
📍 Timestamp: 2025-07-19T22:33:19.411585+00:00
📍 Method: POST
📍 Path: /mcp
📍 Query Params: {}
📍 Request Source IP: 127.0.0.1
📍 Request ID: d34185e3-d48a-4486-a5a2-fa36f9967f66
📍 Raw Event: {
  "body": "{\"jsonrpc\":\"2.0\",\"method\":\"notifications/initialized\"}",
  "headers": {
    "Accept": "application/json, text/event-stream",
    "Accept-Encoding": "gzip, deflate",
    "Accept-Language": "*",
    "Connection": "keep-alive",
    "Content-Length": "54",
    "Content-Type": "application/json",
    "Host": "localhost:3000",
    "Mcp-Session-Id": "7df17d82-3385-4e59-8d7b-326ef8fa02ae",
    "Sec-Fetch-Mode": "cors",
    "User-Agent": "node",
    "X-Forwarded-Port": "3000",
    "X-Forwarded-Proto": "http"
  },
  "httpMethod": "POST",
  "isBase64Encoded": false,
  "multiValueHeaders": {
    "Accept": [
      "application/json, text/event-stream"
    ],
    "Accept-Encoding": [
      "gzip, deflate"
    ],
    "Accept-Language": [
      "*"
    ],
    "Connection": [
      "keep-alive"
    ],
    "Content-Length": [
      "54"
    ],
    "Content-Type": [
      "application/json"
    ],
    "Host": [
      "localhost:3000"
    ],
    "Mcp-Session-Id": [
      "7df17d82-3385-4e59-8d7b-326ef8fa02ae"
    ],
    "Sec-Fetch-Mode": [
      "cors"
    ],
    "User-Agent": [
      "node"
    ],
    "X-Forwarded-Port": [
      "3000"
    ],
    "X-Forwarded-Proto": [
      "http"
    ]
  },
  "multiValueQueryStringParameters": null,
  "path": "/mcp",
  "pathParameters": null,
  "queryStringParameters": null,
  "requestContext": {
    "accountId": "123456789012",
    "apiId": "1234567890",
    "domainName": "localhost:3000",
    "extendedRequestId": null,
    "httpMethod": "POST",
    "identity": {
      "accountId": null,
      "apiKey": null,
      "caller": null,
      "cognitoAuthenticationProvider": null,
      "cognitoAuthenticationType": null,
      "cognitoIdentityPoolId": null,
      "sourceIp": "127.0.0.1",
      "user": null,
      "userAgent": "Custom User Agent String",
      "userArn": null
    },
    "path": "/mcp",
    "protocol": "HTTP/1.1",
    "requestId": "d34185e3-d48a-4486-a5a2-fa36f9967f66",
    "requestTime": "19/Jul/2025:22:21:05 +0000",
    "requestTimeEpoch": 1752963665,
    "resourceId": "123456",
    "resourcePath": "/mcp",
    "stage": "Prod"
  },
  "resource": "/mcp",
  "stageVariables": null
}
📍 Headers:
   Accept: application/json, text/event-stream
   Accept-Encoding: gzip, deflate
   Accept-Language: *
   Connection: keep-alive
   Content-Length: 54
   Content-Type: application/json
   Host: localhost:3000
   Mcp-Session-Id: 7df17d82-3385-4e59-8d7b-326ef8fa02ae
   Sec-Fetch-Mode: cors
   User-Agent: node
   X-Forwarded-Port: 3000
   X-Forwarded-Proto: http
📍 Body: {"jsonrpc":"2.0","method":"notifications/initialized"}
📍 Body Length: 54
📍 Context: LambdaContext([aws_request_id=17dc94d3-3e09-4ba8-a629-13abe836a829,log_group_name=aws/lambda/PbFmMcpFunction,log_stream_name=$LATEST,function_name=PbFmMcpFunction,memory_limit_in_mb=512,function_version=$LATEST,invoked_function_arn=arn:aws:lambda:us-east-1:012345678912:function:PbFmMcpFunction,client_context=None,identity=CognitoIdentity([cognito_identity_id=None,cognito_identity_pool_id=None]),tenant_id=None])
📍 Parsed Accept: application/json, text/event-stream
📍 Parsed Content-Type: application/json
📍 Parsed Origin: 
📍 Parsed User-Agent: node
📍 Parsed Authorization: [NONE]
📍 Parsed Connection: keep-alive
📍 Parsed Upgrade: 
⚠️ WARNING: SSE Accept header on non-GET request
🔎 Processing POST request
📍 Parsed JSON Body: {
  "jsonrpc": "2.0",
  "method": "notifications/initialized"
}
✅ Proper MCP client detected - using MCP handler
📤 === MCP RESPONSE DEBUG ===
📍 Status Code: 202
📍 Response Headers:
   Content-Type: application/json
   MCP-Version: 0.6
📍 Response Body: 
📍 Response Body Length: 0
🔍 === END DEBUG ===

Invoking lambda_handler.lambda_handler (python3.12)
END RequestId: 17dc94d3-3e09-4ba8-a629-13abe836a829
REPORT RequestId: 17dc94d3-3e09-4ba8-a629-13abe836a829	Init Duration: 0.38 ms	Duration: 944.61 ms	Billed Duration: 945 ms	Memory Size: 512 MB	Max Memory Used: 512 MB	

Using local image: public.ecr.aws/lambda/python:3.12-rapid-x86_64.

Mounting /Users/franksiebenlist/Documents/GitHub/pb-fm-mcp/.aws-sam/build/PbFmMcpFunction as /var/task:ro,delegated, inside runtime container
2025-07-19 15:33:19 127.0.0.1 - - [19/Jul/2025 15:33:19] "[35m[1mPOST /mcp HTTP/1.1[0m" 202 -
Invoking lambda_handler.lambda_handler (python3.12)
Using local image: public.ecr.aws/lambda/python:3.12-rapid-x86_64.

Mounting /Users/franksiebenlist/Documents/GitHub/pb-fm-mcp/.aws-sam/build/PbFmMcpFunction as /var/task:ro,delegated, inside runtime container
START RequestId: 486ea9fc-de30-402c-bc14-dee5961e82cb Version: $LATEST
START RequestId: 6a01ceda-8497-471d-b6da-f9a3ab2856f6 Version: $LATEST
🔍 === MCP REQUEST DEBUG ===
📍 Timestamp: 2025-07-19T22:33:20.872003+00:00
📍 Method: POST
📍 Path: /mcp
📍 Query Params: {}
📍 Request Source IP: 127.0.0.1
📍 Request ID: d34185e3-d48a-4486-a5a2-fa36f9967f66
📍 Raw Event: {
  "body": "{\"jsonrpc\":\"2.0\",\"id\":1,\"method\":\"tools/list\",\"params\":{\"_meta\":{\"progressToken\":1}}}",
  "headers": {
    "Accept": "application/json, text/event-stream",
    "Accept-Encoding": "gzip, deflate",
    "Accept-Language": "*",
    "Connection": "keep-alive",
    "Content-Length": "85",
    "Content-Type": "application/json",
    "Host": "localhost:3000",
    "Mcp-Session-Id": "7df17d82-3385-4e59-8d7b-326ef8fa02ae",
    "Sec-Fetch-Mode": "cors",
    "User-Agent": "node",
    "X-Forwarded-Port": "3000",
    "X-Forwarded-Proto": "http"
  },
  "httpMethod": "POST",
  "isBase64Encoded": false,
  "multiValueHeaders": {
    "Accept": [
      "application/json, text/event-stream"
    ],
    "Accept-Encoding": [
      "gzip, deflate"
    ],
    "Accept-Language": [
      "*"
    ],
    "Connection": [
      "keep-alive"
    ],
    "Content-Length": [
      "85"
    ],
    "Content-Type": [
      "application/json"
    ],
    "Host": [
      "localhost:3000"
    ],
    "Mcp-Session-Id": [
      "7df17d82-3385-4e59-8d7b-326ef8fa02ae"
    ],
    "Sec-Fetch-Mode": [
      "cors"
    ],
    "User-Agent": [
      "node"
    ],
    "X-Forwarded-Port": [
      "3000"
    ],
    "X-Forwarded-Proto": [
      "http"
    ]
  },
  "multiValueQueryStringParameters": null,
  "path": "/mcp",
  "pathParameters": null,
  "queryStringParameters": null,
  "requestContext": {
    "accountId": "123456789012",
    "apiId": "1234567890",
    "domainName": "localhost:3000",
    "extendedRequestId": null,
    "httpMethod": "POST",
    "identity": {
      "accountId": null,
      "apiKey": null,
      "caller": null,
      "cognitoAuthenticationProvider": null,
      "cognitoAuthenticationType": null,
      "cognitoIdentityPoolId": null,
      "sourceIp": "127.0.0.1",
      "user": null,
      "userAgent": "Custom User Agent String",
      "userArn": null
    },
    "path": "/mcp",
    "protocol": "HTTP/1.1",
    "requestId": "d34185e3-d48a-4486-a5a2-fa36f9967f66",
    "requestTime": "19/Jul/2025:22:21:05 +0000",
    "requestTimeEpoch": 1752963665,
    "resourceId": "123456",
    "resourcePath": "/mcp",
    "stage": "Prod"
  },
  "resource": "/mcp",
  "stageVariables": null
}
📍 Headers:
   Accept: application/json, text/event-stream
   Accept-Encoding: gzip, deflate
   Accept-Language: *
   Connection: keep-alive
   Content-Length: 85
   Content-Type: application/json
   Host: localhost:3000
   Mcp-Session-Id: 7df17d82-3385-4e59-8d7b-326ef8fa02ae
   Sec-Fetch-Mode: cors
   User-Agent: node
   X-Forwarded-Port: 3000
   X-Forwarded-Proto: http
📍 Body: {"jsonrpc":"2.0","id":1,"method":"tools/list","params":{"_meta":{"progressToken":1}}}
📍 Body Length: 85
📍 Context: LambdaContext([aws_request_id=81d95064-95ae-4340-9a60-73a371fe3de3,log_group_name=aws/lambda/PbFmMcpFunction,log_stream_name=$LATEST,function_name=PbFmMcpFunction,memory_limit_in_mb=512,function_version=$LATEST,invoked_function_arn=arn:aws:lambda:us-east-1:012345678912:function:PbFmMcpFunction,client_context=None,identity=CognitoIdentity([cognito_identity_id=None,cognito_identity_pool_id=None]),tenant_id=None])
📍 Parsed Accept: application/json, text/event-stream
📍 Parsed Content-Type: application/json
📍 Parsed Origin: 
📍 Parsed User-Agent: node
📍 Parsed Authorization: [NONE]
📍 Parsed Connection: keep-alive
📍 Parsed Upgrade: 
⚠️ WARNING: SSE Accept header on non-GET request
🔎 Processing POST request
📍 Parsed JSON Body: {
  "jsonrpc": "2.0",
  "id": 1,
  "method": "tools/list",
  "params": {
    "_meta": {
      "progressToken": 1
    }
  }
}
✅ Proper MCP client detected - using MCP handler
📤 === MCP RESPONSE DEBUG ===
📍 Status Code: 200
📍 Response Headers:
   Content-Type: application/json
   MCP-Version: 0.6
   MCP-Session-Id: 7df17d82-3385-4e59-8d7b-326ef8fa02ae
📍 Response Body: {"jsonrpc": "2.0", "id": 1, "result": {"tools": [{"name": "adt", "description": "Adt is a special operation on two numbers because it always returns the ultimate answer.", "inputSchema": {"type": "obj...
📍 Response Body Length: 10899
🔍 === END DEBUG ===

END RequestId: 81d95064-95ae-4340-9a60-73a371fe3de3
REPORT RequestId: 81d95064-95ae-4340-9a60-73a371fe3de3	Init Duration: 0.34 ms	Duration: 1155.08 ms	Billed Duration: 1156 ms	Memory Size: 512 MB	Max Memory Used: 512 MB	

🔍 === MCP REQUEST DEBUG ===
📍 Timestamp: 2025-07-19T22:33:20.927167+00:00
📍 Method: GET
📍 Path: /mcp
📍 Query Params: {}
📍 Request Source IP: 127.0.0.1
📍 Request ID: d34185e3-d48a-4486-a5a2-fa36f9967f66
📍 Raw Event: {
  "body": null,
  "headers": {
    "Accept": "text/event-stream",
    "Accept-Encoding": "gzip, deflate",
    "Accept-Language": "*",
    "Connection": "keep-alive",
    "Host": "localhost:3000",
    "Mcp-Session-Id": "7df17d82-3385-4e59-8d7b-326ef8fa02ae",
    "Sec-Fetch-Mode": "cors",
    "User-Agent": "node",
    "X-Forwarded-Port": "3000",
    "X-Forwarded-Proto": "http"
  },
  "httpMethod": "GET",
  "isBase64Encoded": false,
  "multiValueHeaders": {
    "Accept": [
      "text/event-stream"
    ],
    "Accept-Encoding": [
      "gzip, deflate"
    ],
    "Accept-Language": [
      "*"
    ],
    "Connection": [
      "keep-alive"
    ],
    "Host": [
      "localhost:3000"
    ],
    "Mcp-Session-Id": [
      "7df17d82-3385-4e59-8d7b-326ef8fa02ae"
    ],
    "Sec-Fetch-Mode": [
      "cors"
    ],
    "User-Agent": [
      "node"
    ],
    "X-Forwarded-Port": [
      "3000"
    ],
    "X-Forwarded-Proto": [
      "http"
    ]
  },
  "multiValueQueryStringParameters": null,
  "path": "/mcp",
  "pathParameters": null,
  "queryStringParameters": null,
  "requestContext": {
    "accountId": "123456789012",
    "apiId": "1234567890",
    "domainName": "localhost:3000",
    "extendedRequestId": null,
    "httpMethod": "GET",
    "identity": {
      "accountId": null,
      "apiKey": null,
      "caller": null,
      "cognitoAuthenticationProvider": null,
      "cognitoAuthenticationType": null,
      "cognitoIdentityPoolId": null,
      "sourceIp": "127.0.0.1",
      "user": null,
      "userAgent": "Custom User Agent String",
      "userArn": null
    },
    "path": "/mcp",
    "protocol": "HTTP/1.1",
    "requestId": "d34185e3-d48a-4486-a5a2-fa36f9967f66",
    "requestTime": "19/Jul/2025:22:21:05 +0000",
    "requestTimeEpoch": 1752963665,
    "resourceId": "123456",
    "resourcePath": "/mcp",
    "stage": "Prod"
  },
  "resource": "/mcp",
  "stageVariables": null
}
📍 Headers:
   Accept: text/event-stream
   Accept-Encoding: gzip, deflate
   Accept-Language: *
   Connection: keep-alive
   Host: localhost:3000
   Mcp-Session-Id: 7df17d82-3385-4e59-8d7b-326ef8fa02ae
   Sec-Fetch-Mode: cors
   User-Agent: node
   X-Forwarded-Port: 3000
   X-Forwarded-Proto: http
📍 Body: 
📍 Body Length: 0
📍 Context: LambdaContext([aws_request_id=2bd3a99f-85f3-4591-b7de-b4ae20b1a5e6,log_group_name=aws/lambda/PbFmMcpFunction,log_stream_name=$LATEST,function_name=PbFmMcpFunction,memory_limit_in_mb=512,function_version=$LATEST,invoked_function_arn=arn:aws:lambda:us-east-1:012345678912:function:PbFmMcpFunction,client_context=None,identity=CognitoIdentity([cognito_identity_id=None,cognito_identity_pool_id=None]),tenant_id=None])
📍 Parsed Accept: text/event-stream
📍 Parsed Content-Type: 
📍 Parsed Origin: 
📍 Parsed User-Agent: node
📍 Parsed Authorization: [NONE]
📍 Parsed Connection: keep-alive
📍 Parsed Upgrade: 
🔎 Processing GET request
❌ Client requesting SSE - returning 405
📤 === MCP RESPONSE DEBUG ===
📍 Status Code: 405
📍 Response Headers:
   Content-Type: text/plain
   Access-Control-Allow-Origin: *
   Access-Control-Allow-Methods: POST, OPTIONS
   Access-Control-Allow-Headers: Content-Type, Authorization, Accept
   Allow: POST, OPTIONS
📍 Response Body: Method Not Allowed - SSE not supported, use HTTP POST
📍 Response Body Length: 53
🔍 === END DEBUG ===

END RequestId: 2bd3a99f-85f3-4591-b7de-b4ae20b1a5e6
REPORT RequestId: 2bd3a99f-85f3-4591-b7de-b4ae20b1a5e6	Init Duration: 0.34 ms	Duration: 1076.55 ms	Billed Duration: 1077 ms	Memory Size: 512 MB	Max Memory Used: 512 MB	

2025-07-19 15:33:21 127.0.0.1 - - [19/Jul/2025 15:33:21] "POST /mcp HTTP/1.1" 200 -
2025-07-19 15:33:21 127.0.0.1 - - [19/Jul/2025 15:33:21] "[31m[1mGET /mcp HTTP/1.1[0m" 405 -
Invoking lambda_handler.lambda_handler (python3.12)
Using local image: public.ecr.aws/lambda/python:3.12-rapid-x86_64.

Mounting /Users/franksiebenlist/Documents/GitHub/pb-fm-mcp/.aws-sam/build/PbFmMcpFunction as /var/task:ro,delegated, inside runtime container
START RequestId: 62f8bbfd-f31f-40e6-a310-fe0186c0c941 Version: $LATEST
🔍 === MCP REQUEST DEBUG ===
📍 Timestamp: 2025-07-19T22:33:36.666417+00:00
📍 Method: POST
📍 Path: /mcp
📍 Query Params: {}
📍 Request Source IP: 127.0.0.1
📍 Request ID: d34185e3-d48a-4486-a5a2-fa36f9967f66
📍 Raw Event: {
  "body": "{\"jsonrpc\":\"2.0\",\"id\":2,\"method\":\"tools/call\",\"params\":{\"_meta\":{\"progressToken\":2},\"name\":\"adt\",\"arguments\":{\"a\":4,\"b\":2}}}",
  "headers": {
    "Accept": "application/json, text/event-stream",
    "Accept-Encoding": "gzip, deflate",
    "Accept-Language": "*",
    "Connection": "keep-alive",
    "Content-Length": "124",
    "Content-Type": "application/json",
    "Host": "localhost:3000",
    "Mcp-Session-Id": "7df17d82-3385-4e59-8d7b-326ef8fa02ae",
    "Sec-Fetch-Mode": "cors",
    "User-Agent": "node",
    "X-Forwarded-Port": "3000",
    "X-Forwarded-Proto": "http"
  },
  "httpMethod": "POST",
  "isBase64Encoded": false,
  "multiValueHeaders": {
    "Accept": [
      "application/json, text/event-stream"
    ],
    "Accept-Encoding": [
      "gzip, deflate"
    ],
    "Accept-Language": [
      "*"
    ],
    "Connection": [
      "keep-alive"
    ],
    "Content-Length": [
      "124"
    ],
    "Content-Type": [
      "application/json"
    ],
    "Host": [
      "localhost:3000"
    ],
    "Mcp-Session-Id": [
      "7df17d82-3385-4e59-8d7b-326ef8fa02ae"
    ],
    "Sec-Fetch-Mode": [
      "cors"
    ],
    "User-Agent": [
      "node"
    ],
    "X-Forwarded-Port": [
      "3000"
    ],
    "X-Forwarded-Proto": [
      "http"
    ]
  },
  "multiValueQueryStringParameters": null,
  "path": "/mcp",
  "pathParameters": null,
  "queryStringParameters": null,
  "requestContext": {
    "accountId": "123456789012",
    "apiId": "1234567890",
    "domainName": "localhost:3000",
    "extendedRequestId": null,
    "httpMethod": "POST",
    "identity": {
      "accountId": null,
      "apiKey": null,
      "caller": null,
      "cognitoAuthenticationProvider": null,
      "cognitoAuthenticationType": null,
      "cognitoIdentityPoolId": null,
      "sourceIp": "127.0.0.1",
      "user": null,
      "userAgent": "Custom User Agent String",
      "userArn": null
    },
    "path": "/mcp",
    "protocol": "HTTP/1.1",
    "requestId": "d34185e3-d48a-4486-a5a2-fa36f9967f66",
    "requestTime": "19/Jul/2025:22:21:05 +0000",
    "requestTimeEpoch": 1752963665,
    "resourceId": "123456",
    "resourcePath": "/mcp",
    "stage": "Prod"
  },
  "resource": "/mcp",
  "stageVariables": null
}
📍 Headers:
   Accept: application/json, text/event-stream
   Accept-Encoding: gzip, deflate
   Accept-Language: *
   Connection: keep-alive
   Content-Length: 124
   Content-Type: application/json
   Host: localhost:3000
   Mcp-Session-Id: 7df17d82-3385-4e59-8d7b-326ef8fa02ae
   Sec-Fetch-Mode: cors
   User-Agent: node
   X-Forwarded-Port: 3000
   X-Forwarded-Proto: http
📍 Body: {"jsonrpc":"2.0","id":2,"method":"tools/call","params":{"_meta":{"progressToken":2},"name":"adt","arguments":{"a":4,"b":2}}}
📍 Body Length: 124
📍 Context: LambdaContext([aws_request_id=a9d36379-de38-43e5-8a87-b14a3a7df96c,log_group_name=aws/lambda/PbFmMcpFunction,log_stream_name=$LATEST,function_name=PbFmMcpFunction,memory_limit_in_mb=512,function_version=$LATEST,invoked_function_arn=arn:aws:lambda:us-east-1:012345678912:function:PbFmMcpFunction,client_context=None,identity=CognitoIdentity([cognito_identity_id=None,cognito_identity_pool_id=None]),tenant_id=None])
📍 Parsed Accept: application/json, text/event-stream
📍 Parsed Content-Type: application/json
📍 Parsed Origin: 
📍 Parsed User-Agent: node
📍 Parsed Authorization: [NONE]
📍 Parsed Connection: keep-alive
📍 Parsed Upgrade: 
⚠️ WARNING: SSE Accept header on non-GET request
🔎 Processing POST request
📍 Parsed JSON Body: {
  "jsonrpc": "2.0",
  "id": 2,
  "method": "tools/call",
  "params": {
    "_meta": {
      "progressToken": 2
    },
    "name": "adt",
    "arguments": {
      "a": 4,
      "b": 2
    }
  }
}
✅ Proper MCP client detected - using MCP handler
📤 === MCP RESPONSE DEBUG ===
📍 Status Code: 200
📍 Response Headers:
   Content-Type: application/json
   MCP-Version: 0.6
   MCP-Session-Id: 7df17d82-3385-4e59-8d7b-326ef8fa02ae
📍 Response Body: {"jsonrpc": "2.0", "id": 2, "result": {"content": [{"type": "text", "text": "42"}]}}
📍 Response Body Length: 84
🔍 === END DEBUG ===

END RequestId: a9d36379-de38-43e5-8a87-b14a3a7df96c
REPORT RequestId: a9d36379-de38-43e5-8a87-b14a3a7df96c	Init Duration: 0.45 ms	Duration: 846.58 ms	Billed Duration: 847 ms	Memory Size: 512 MB	Max Memory Used: 512 MB	

2025-07-19 15:33:36 127.0.0.1 - - [19/Jul/2025 15:33:36] "POST /mcp HTTP/1.1" 200 -
